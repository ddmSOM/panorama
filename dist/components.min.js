!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("d3"),require("leaflet"),require("react-leaflet"),require("react-dom"),require("cartodb-client"),require("intro.js"),require("queue-async")):"function"==typeof define&&define.amd?define(["react","d3","leaflet","react-leaflet","react-dom","cartodb-client","intro.js","queue-async"],e):"object"==typeof exports?exports["@panorama/toolkit"]=e(require("react"),require("d3"),require("leaflet"),require("react-leaflet"),require("react-dom"),require("cartodb-client"),require("intro.js"),require("queue-async")):t["@panorama/toolkit"]=e(t.React,t.d3,t.leaflet,t["react-leaflet"],t.ReactDOM,t["cartodb-client"],t["intro.js"],t["queue-async"])}(this,function(t,e,n,o,i,s,a,u){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),r=t[e[0]];return function(t,e,o){r.apply(this,[t,e,o].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){"use strict";var r=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var o=n(45),i=r(o),s=n(72),a=r(s),u=n(73),l=r(u),c=n(74),p=r(c),f=n(46),h=r(f),d=n(81),y=r(d),v=n(75),m=r(v),g=n(76),x=r(g),b=n(78),k=r(b),_=n(79),P=r(_),T=n(80),O=r(T),w=n(84),M=r(w),C=n(85),E=r(C),S=n(87),A=r(S),j=n(89),L=r(j),I=n(90),R=r(I),D=n(31),N=n(92),F=r(N),H=n(97),U=r(H),q=n(93),W=r(q),B=n(83),z=r(B),K=n(95),G=r(K);e["default"]={AreaChart:i["default"],CartoDBLoader:a["default"],CartoDBTileLayer:l["default"],ChartSlider:p["default"],DiscreteBarChart:h["default"],Donut:y["default"],HashManager:m["default"],HorizontalDiscreteBarChart:x["default"],IntroManager:k["default"],ItemSelector:P["default"],LeafletChoropleth:O["default"],Legend:M["default"],LineChart:E["default"],MapChoropleth:A["default"],Navigation:L["default"],OffsetAreaChart:R["default"],PanoramaDispatcher:D.PanoramaDispatcher,PanoramaEventTypes:D.PanoramaEventTypes,Punchcard:F["default"],TimeBasedMarkers:U["default"],Tooltip:z["default"],ScatterPlot:W["default"],TexturalList:G["default"]},t.exports=e["default"]},function(t,e){"use strict";e["default"]=function(t){return t&&t.__esModule?t:{"default":t}},e.__esModule=!0},function(t,e){"use strict";e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e.__esModule=!0},function(t,e,n){"use strict";var r=n(102)["default"];e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),r(t,o.key,o)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),e.__esModule=!0},function(t,e,n){"use strict";var r=n(103)["default"];e["default"]=function(t,e,n){for(var o=!0;o;){var i=t,s=e,a=n;o=!1,null===i&&(i=Function.prototype);var u=r(i,s);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=s,n=a,o=!0,u=c=void 0}},e.__esModule=!0},function(t,e,n){"use strict";var r=n(101)["default"],o=n(105)["default"];e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=r(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o?o(t,e):t.__proto__=e)},e.__esModule=!0},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e,n){var r=n(132)("wks"),o=n(138),i=n(12).Symbol;t.exports=function(t){return r[t]||(r[t]=i&&i[t]||(i||o)("Symbol."+t))}},function(t,e,n){"use strict";var r=n(23)["default"];e["default"]=r||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e.__esModule=!0},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){"use strict";var r=n(3)["default"],o=n(2)["default"],i=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var s=n(7),a=i(s),u=n(98),l=i(u),c=function(){function t(e){o(this,t),this._props=e,this.root=null,this.mounted=!1,this.axes=[],this.tooltip=null,this.dispatch=a["default"].dispatch("mounted","updated","mouseOver","mouseOut","mouseMove","click")}return r(t,[{key:"willMount",value:function(){}},{key:"onMount",value:function(){var t=this;this.mounted||(this.addEvents(),this.root=a["default"].select(this.selector),this.svg=this.root.append("svg").classed("interactive",this.props.interactive),this.props.interactive&&this.props.tooltip&&this.svg.on("mousemove",this.dispatch.mouseMove),this.base=this.svg.append("g"),this.updateDimensions(),this.axes.forEach(function(e){return e.onMount(t.base)}),this.tooltipRef&&(this.tooltip=new l["default"](this.tooltipRef,this.props.tooltipOptions||{}),this.tooltip.relativeContainer=this.svg),this.mounted=!0,this.dispatch.mounted())}},{key:"onUpdate",value:function(){this.mounted&&(this.updateDimensions(),this._render(),this.dispatch.updated())}},{key:"onUnMount",value:function(){this.axes.forEach(function(t){return t.onUnMount()}),this.axes.length=0,this.removeEvents(),this.svg.on("move",null),this.svg.remove(),this.root=this.svg=null,this.mounted=!1,this.props=null}},{key:"addEvents",value:function(){this.dispatch.on("mounted",this.onMountedHandler.bind(this)),this.dispatch.on("updated",this.onUpdatedHandler.bind(this)),this.dispatch.on("mouseOver",this.onMouseOverHandler.bind(this)),this.dispatch.on("mouseOut",this.onMouseOutHandler.bind(this)),this.dispatch.on("click",this.onClickHandler.bind(this)),this.dispatch.on("mouseMove",this.onMouseMoveHandler.bind(this))}},{key:"removeEvents",value:function(){this.dispatch.on("mounted",null),this.dispatch.on("updated",null),this.dispatch.on("mouseOver",null),this.dispatch.on("mouseOut",null),this.dispatch.on("mouseMove",null),this.dispatch.on("click",null)}},{key:"onMountedHandler",value:function(){"function"==typeof this.props.onMountHandler&&this.props.onMountHandler()}},{key:"onUpdatedHandler",value:function(){"function"==typeof this.props.onUpdatedHandler&&this.props.onUpdatedHandler()}},{key:"onMouseOverHandler",value:function(t){this.tooltip&&this.tooltip.show(a["default"].event,t),"function"==typeof this.props.onMouseOverHandler&&this.props.onMouseOverHandler(t)}},{key:"onMouseOutHandler",value:function(t){this.tooltip&&this.tooltip.hide(),"function"==typeof this.props.onMouseOutHandler&&this.props.onMouseOutHandler(t)}},{key:"onMouseMoveHandler",value:function(){this.tooltip&&this.tooltip.setPosition(a["default"].event)}},{key:"onClickHandler",value:function(t){"function"==typeof this.props.onClickHandler&&this.props.onClickHandler(t)}},{key:"setAxis",value:function(t){"Axis"===t.toString()&&this.axes.push(t)}},{key:"updateAxis",value:function(t,e,n){this.axes[t].update(e,n)}},{key:"_render",value:function(){this.props.data&&(this.preRender(),this.axes.forEach(function(t){return t.render()}),this.render(),this.postRender())}},{key:"preRender",value:function(){}},{key:"render",value:function(){throw new Error("render function should be implemented")}},{key:"postRender",value:function(){}},{key:"updateDimensions",value:function(){var t=this,e=this.props,n=e.width,r=e.height,o=e.margin;this.width===n&&this.height===r||(this.width=n-o.left-o.right,this.height=r-o.top-o.bottom,this.svg.attr("width",n).attr("height",r),this.base.attr("transform","translate("+o.left+","+o.top+")"),this.axes.forEach(function(e){e.width=t.width,e.height=t.height}))}},{key:"selector",get:function(){return this._selector},set:function(t){this._selector=t}},{key:"props",get:function(){return this._props},set:function(t){this._props=t}},{key:"tooltipRef",set:function(t){this._tooltipRef=t},get:function(){return this._tooltipRef}}]),t}();e["default"]=c,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),l=a(u),c=n(32);n(165);var p=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),i(e,[{key:"componentWillMount",value:function(){if(!this.chartConstructor)throw new Error("Need to set chartConstructor");this.chart=new this.chartConstructor(this.props),this.chart.willMount()}},{key:"componentDidMount",value:function(){this.chart.selector=this.refs.chart,this.chart.tooltipRef=this.refs.tooltip,this.chart.props=this.props,this.chart.onMount()}},{key:"componentDidUpdate",value:function(){this.chart.props=this.props,this.chart.onUpdate()}},{key:"componentWillUnmount",value:function(){this.chart.onUnMount(),this.chart=null}},{key:"getClassName",value:function(){return this.props.className?" "+this.props.className:""}},{key:"render",value:function(){return l["default"].createElement("div",{className:"panorama"+this.getClassName()},l["default"].createElement("div",{ref:"chart",className:"panorama--chart-container"},this.props.tooltip&&l["default"].createElement("div",{ref:"tooltip",className:"panorama--tooltip"})))}}],[{key:"propTypes",value:c.DefaultTypes,enumerable:!0},{key:"defaultProps",value:c.DefaultProps,enumerable:!0}]),e}(u.Component);e["default"]=p,t.exports=e["default"]},function(t,e,n){var r=n(25);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports={}},function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},function(t,e,n){"use strict";var r=n(3)["default"],o=n(2)["default"],i=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var s=n(7),a=i(s),u=n(32),l=function(){function t(e,n){o(this,t),this._options=e,this.axis=a["default"].svg.axis().scale(n),this.element=null}return r(t,[{key:"update",value:function(t,e){this.options=e,this.axis.scale(t),this.setAxisMethods()}},{key:"onMount",value:function(t){this.element=t.append("g").attr("class",this.options.className||""),this.setAxisMethods(),this.axisLabel()}},{key:"onUpdate",value:function(){}},{key:"onUnMount",value:function(){this.element&&this.element.remove(),this._options=null,this.element=null,this.axis=null}},{key:"render",value:function(){this.setPosition(),this.element.call(this.axis),this.renderTickExtras(),this.renderLabelExtras()}},{key:"renderTickExtras",value:function(){var t=this.element.selectAll("text");this.options.attr&&t.attr(this.options.attr),this.options.style&&t.style(this.options.style)}},{key:"renderLabelExtras",value:function(){if(this.label&&this.options.label){var t=this.options.label;t.attr&&this.label.attr(t.attr),t.style&&this.label.style(t.style)}}},{key:"setPosition",value:function(){var t=this.options.position;if(t)switch(t){case"bottom":this.element.attr("transform","translate(0,"+this.height+")");break;case"right":this.element.attr("transform","translate("+this.width+",0)")}}},{key:"setAxisMethods",value:function(){var t=this;u.axisMethods.forEach(function(e){t.options.hasOwnProperty(e)&&t.axis[e](t.options[e])})}},{key:"axisLabel",value:function(){this.options.label&&(this.label=this.element.append("text").text(this.options.label.text))}},{key:"toString",value:function(){return"Axis"}},{key:"options",get:function(){return this._options},set:function(t){this._options=t}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),t}();e["default"]=l,t.exports=e["default"]},function(t,e,n){var r=n(34);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(12),o=n(8),i=n(19),s="prototype",a=function(t,e,n){var u,l,c,p=t&a.F,f=t&a.G,h=t&a.S,d=t&a.P,y=t&a.B,v=t&a.W,m=f?o:o[e]||(o[e]={}),g=f?r:h?r[e]:(r[e]||{})[s];f&&(n=e);for(u in n)l=!p&&g&&u in g,l&&u in m||(c=l?g[u]:n[u],m[u]=f&&"function"!=typeof g[u]?n[u]:y&&l?i(c,r):v&&g[u]==c?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[s]=t[s],e}(c):d&&"function"==typeof c?i(Function.call,c):c,d&&((m[s]||(m[s]={}))[u]=c))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,t.exports=a},function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e,n){t.exports={"default":n(110),__esModule:!0}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){function r(t){return null!=t&&i(o(t))}var o=n(186),i=n(27);t.exports=r},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&r>=t}var r=9007199254740991;t.exports=n},function(t,e){function n(t){return!!t&&"object"==typeof t}t.exports=n},function(t,e,n){var r=n(65),o=n(27),i=n(28),s="[object Array]",a=Object.prototype,u=a.toString,l=r(Array,"isArray"),c=l||function(t){return i(t)&&o(t.length)&&u.call(t)==s};t.exports=c},function(t,e){t.exports=i},function(t,e,n){"use strict";var r=n(23)["default"];Object.defineProperty(e,"__esModule",{value:!0});var o=n(61),i={Legend:{selected:"Legend:selected"},ItemSelector:{selected:"ItemSelector:selected"},ChartSlider:{selected:"ChartSlider:selected"}};e.PanoramaEventTypes=i;var s={Legend:{selected:function(t,e){s.emit(i.Legend.selected,t,e)}},ItemSelector:{selected:function(t,e){s.emit(i.ItemSelector.selected,t,e)}},ChartSlider:{selected:function(t){s.emit(i.ChartSlider.selected,t)}}};e.PanoramaDispatcher=s,r(s,o.EventEmitter.prototype)},function(t,e,n){"use strict";var r=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),i=n(7),s=r(i),a={width:o.PropTypes.number,height:o.PropTypes.number,margin:o.PropTypes.shape({top:o.PropTypes.number,right:o.PropTypes.number,bottom:o.PropTypes.number,left:o.PropTypes.number}),xAccessor:o.PropTypes.func,yAccessor:o.PropTypes.func,selectionAccessor:o.PropTypes.func,xScale:o.PropTypes.func,yScale:o.PropTypes.func,xaxis:o.PropTypes.object,yaxis:o.PropTypes.object,interactive:o.PropTypes.bool,tooltip:o.PropTypes.bool};e.DefaultTypes=a;var u={width:960,height:500,margin:{top:20,right:30,bottom:20,left:30},selectionAccessor:function(t){return t.key},xAccessor:function(t){return t.key},yAccessor:function(t){return t.value},xScale:s["default"].scale.linear(),yScale:s["default"].scale.linear(),interactive:!0,tooltip:!1};e.DefaultProps=u;var l=["orient","ticks","tickValues","tickSize","innerTickSize","outerTickSize","tickPadding","tickFormat"];e.axisMethods=l;var c={closeDelay:100,align:"top center",offset:[0,-10]};e.tooltipDefaultOptions=c},function(t,e){"use strict";e["default"]=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},e.__esModule=!0},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(24),o=n(10)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=(e=Object(t))[o])?n:i?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){t.exports=!n(38)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(9),o=n(54);t.exports=n(37)?function(t,e,n){return r.setDesc(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(9).setDesc,o=n(49),i=n(10)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){"use strict";var r=n(135)(!0);n(51)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){n(141);var r=n(16);r.NodeList=r.HTMLCollection=r.Array},function(t,e){function n(t,e){return t="number"==typeof t||r.test(t)?+t:-1,e=null==e?o:e,t>-1&&t%1==0&&e>t}var r=/^\d+$/,o=9007199254740991;t.exports=n},function(t,e,n){function r(t){return i(t)&&o(t)&&a.call(t,"callee")&&!u.call(t,"callee")}var o=n(26),i=n(28),s=Object.prototype,a=s.hasOwnProperty,u=s.propertyIsEnumerable;t.exports=r},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(11)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(7),c=u(l),p=n(6),f=n(14),h=u(f),d=n(71),y=u(d);n(150);var v=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.chartConstructor=y["default"]}return o(e,t),i(e,null,[{key:"propTypes",value:a({},h["default"].propTypes,{fillColor:p.PropTypes.oneOfType([p.PropTypes.string,p.PropTypes.number]),fillOpacity:p.PropTypes.number,interpolate:p.PropTypes.string}),enumerable:!0},{key:"defaultProps",value:a({},h["default"].defaultProps,{xScale:c["default"].scale.ordinal(),className:"area-chart",interpolate:"basis",xaxis:{className:"x axis",orient:"bottom",position:"bottom",attr:{dx:"0",dy:"0.5em"},style:{"text-anchor":"middle"}},yaxis:{className:"y axis",orient:"left"}}),enumerable:!0}]),e}(h["default"]);e["default"]=v,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(11)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(6),c=n(7),p=u(c),f=n(14),h=u(f),d=n(47),y=u(d);n(152);var v=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.chartConstructor=y["default"]}return o(e,t),i(e,null,[{key:"propTypes",value:a({},h["default"].propTypes,{barSpacing:l.PropTypes.number}),enumerable:!0},{key:"defaultProps",value:a({},h["default"].defaultProps,{barSpacing:.1,xScale:p["default"].scale.ordinal(),className:"bar-chart vertical",xaxis:{className:"x axis",orient:"bottom",position:"bottom",attr:{dx:"0",dy:"0.5em"},style:{"text-anchor":"middle"}},yaxis:{className:"y axis",orient:"left"}}),enumerable:!0}]),e}(h["default"]);e["default"]=v,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(13),l=a(u),c=n(7),p=a(c),f=n(18),h=a(f),d=function(t){function e(){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,t),i(e,[{key:"willMount",value:function(){this.props.xaxis&&this.setAxis(new h["default"](this.props.xaxis,this.props.xScale)),this.props.yaxis&&this.setAxis(new h["default"](this.props.yaxis,this.props.yScale))}},{key:"onMount",value:function(t){r(Object.getPrototypeOf(e.prototype),"onMount",this).call(this,t),this._render()}},{key:"preRender",value:function(){var t=this.props,e=t.data,n=t.xAccessor,r=t.yAccessor,o=t.xScale,i=t.yScale;o.rangeRoundBands([0,this.width],this.barSpacing),o.domain(e.map(function(t){return n(t)})),i.range([this.height,0]),i.domain([0,p["default"].max(e,function(t){return r(t)})]),this.updateAxis(0,o,this.props.xaxis),this.updateAxis(1,i,this.props.yaxis)}},{key:"render",value:function(){var t=this,e=this.props,n=e.data,r=e.xAccessor,o=e.yAccessor,i=e.xScale,s=e.yScale,a=this.base.selectAll(".bar").data(n);a.exit().remove(),a.enter().append("rect").attr("class","bar"),a.attr("x",function(t){return i(r(t))}).attr("y",function(t){return s(o(t))}).attr("width",i.rangeBand()).attr("height",function(e){return t.height-s(o(e))})}},{key:"postRender",value:function(){var t=this.props,e=t.selected,n=t.selectionAccessor,r=t.interactive,o=this.base.selectAll(".bar");r&&o.on("click",this.dispatch.click).on("mouseover",this.dispatch.mouseOver).on("mouseout",this.dispatch.mouseOut),e&&o.classed("selected",function(t){return n(t)===e})}},{key:"barSpacing",get:function(){return this.props.barSpacing||.1}}]),e}(l["default"]);e["default"]=d,t.exports=e["default"]},function(t,e){"use strict";e["default"]=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e},e.__esModule=!0},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(24);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var r=n(52),o=n(20),i=n(55),s=n(39),a=n(49),u=n(16),l=n(124),c=n(40),p=n(9).getProto,f=n(10)("iterator"),h=!([].keys&&"next"in[].keys()),d="@@iterator",y="keys",v="values",m=function(){return this};t.exports=function(t,e,n,g,x,b,k){l(n,e,g);var _,P,T=function(t){if(!h&&t in C)return C[t];switch(t){case y:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},O=e+" Iterator",w=x==v,M=!1,C=t.prototype,E=C[f]||C[d]||x&&C[x],S=E||T(x);if(E){var A=p(S.call(new t));c(A,O,!0),!r&&a(C,d)&&s(A,f,m),w&&E.name!==v&&(M=!0,S=function(){return E.call(this)})}if(r&&!k||!h&&!M&&C[f]||s(C,f,S),u[e]=S,u[O]=m,x)if(_={values:w?S:T(v),keys:b?S:T(y),entries:w?T("entries"):S},k)for(P in _)P in C||i(C,P,_[P]);else o(o.P+o.F*(h||M),e,_);return _}},function(t,e){t.exports=!0},function(t,e,n){var r=n(20),o=n(8),i=n(38);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",s)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){t.exports=n(39)},function(t,e,n){var r=n(9).getDesc,o=n(25),i=n(15),s=function(t,e){if(i(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{o=n(19)(Function.call,r(Object.prototype,"__proto__").set,2),o(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return s(t,n),e?t.__proto__=n:o(t,n),t}}({},!1):void 0),check:s}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(50),o=n(36);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(36);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(35),o=n(10)("iterator"),i=n(16);t.exports=n(8).getIteratorMethod=function(t){return void 0!=t?t[o]||t["@@iterator"]||i[r(t)]:void 0}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,a,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),l=n.slice(),o=l.length,u=0;o>u;u++)l[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}function o(t){return null!=t&&s(g(t))}function i(t,e){return t="number"==typeof t||h.test(t)?+t:-1,e=null==e?m:e,t>-1&&t%1==0&&e>t}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&m>=t}function a(t){for(var e=l(t),n=e.length,r=n&&t.length,o=!!r&&s(r)&&(f(t)||p(t)),a=-1,u=[];++a<n;){var c=e[a];(o&&i(c,r)||y.call(t,c))&&u.push(c)}return u}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&s(e)&&(f(t)||p(t))&&e||0;for(var n=t.constructor,r=-1,o="function"==typeof n&&n.prototype===t,a=Array(e),l=e>0;++r<e;)a[r]=r+"";for(var c in t)l&&i(c,e)||"constructor"==c&&(o||!y.call(t,c))||a.push(c);return a}var c=n(170),p=n(173),f=n(174),h=/^\d+$/,d=Object.prototype,y=d.hasOwnProperty,v=c(Object,"keys"),m=9007199254740991,g=r("length"),x=v?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?a(t):u(t)?v(t):[]}:a;t.exports=x},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(r);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-e,0),s=Array(i);++r<i;)s[r]=n[e+r];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var a=Array(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=s,t.apply(this,a)}}var r="Expected a function",o=Math.max;t.exports=n},function(t,e,n){function r(t,e,n){if("function"!=typeof t)return o;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,s){return t.call(e,n,r,o,i,s)}}return function(){return t.apply(e,arguments)}}var o=n(194);t.exports=r},function(t,e,n){function r(t,e){var n=null==t?void 0:t[e];return o(n)?n:void 0}var o=n(192);t.exports=r},function(t,e,n){function r(t){return o(t)?t:Object(t)}var o=n(17);t.exports=r},function(t,e,n){var r=n(177),o=n(178),i=n(184),s=i(function(t,e,n){return n?r(t,e,n):o(t,e)});t.exports=s},function(t,e,n){var r=n(65),o=n(26),i=n(17),s=n(190),a=r(Object,"keys"),u=a?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?s(t):i(t)?a(t):[]}:s;t.exports=u},function(t,e,n){function r(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(i(t)||o(t))&&e||0;for(var n=t.constructor,r=-1,l="function"==typeof n&&n.prototype===t,p=Array(e),f=e>0;++r<e;)p[r]=r+"";for(var h in t)f&&s(h,e)||"constructor"==h&&(l||!c.call(t,h))||p.push(h);return p}var o=n(44),i=n(29),s=n(43),a=n(27),u=n(17),l=Object.prototype,c=l.hasOwnProperty;t.exports=r},function(t,e){function n(t,e){var n=t.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!t.disabled:"a"===n?t.href||e:e)&&o(t)}function r(t){return t.offsetWidth<=0&&t.offsetHeight<=0||"none"===t.style.display}function o(t){for(;t&&t!==document.body;){if(r(t))return!1;t=t.parentNode}return!0}function i(t){var e=t.getAttribute("tabindex");null===e&&(e=void 0);var r=isNaN(e);return(r||e>=0)&&n(t,!r)}function s(t){return[].slice.call(t.querySelectorAll("*"),0).filter(function(t){return i(t)})}t.exports=s},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(13),l=a(u),c=n(7),p=a(c),f=n(18),h=a(f),d=function(t){function e(){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,t),i(e,[{key:"willMount",value:function(){var t=this.props,e=t.xAccessor,n=t.yAccessor,r=t.xScale,o=t.yScale,i=t.interpolate;this.props.xaxis&&this.setAxis(new h["default"](this.props.xaxis,this.props.xScale)),this.props.yaxis&&this.setAxis(new h["default"](this.props.yaxis,this.props.yScale)),this.points=[],this.areaGenerator=p["default"].svg.area().interpolate(i).x(function(t){return r(e(t))}).y0(function(t){return o(0)}).y1(function(t){return o(n(t))})}},{key:"onMount",value:function(){r(Object.getPrototypeOf(e.prototype),"onMount",this).call(this),this.baseLayer=this.base.append("g").classed("area-layer",!0),this._render()}},{key:"getClosestDataIndex",value:function(t){if(!this.points.length)return null;var e=this.props;e.data,e.xAccessor;return this.points.forEach(function(e){e.d=Math.abs(e.x-t)}),this.points.sort(function(t,e){return p["default"].ascending(t.d,e.d)}),this.points[0].i}},{key:"onMouseMoveHandler",value:function(){if(this.hover&&this.tooltip){var t=p["default"].mouse(this.baseLayer.node()),e=(this.props.xScale.invert(t[0]),this.getClosestDataIndex(t[0]));this.tooltip.setPosition(p["default"].event),null!==e&&this.tooltip.setContent(this.props.data[0][e])}}},{key:"preRender",value:function(){var t=this,e=this.props,n=e.data,r=e.xScale,o=e.yScale,i=e.interpolate,s=e.xAccessor,a=e.yAccessor;r.range([0,this.width]),o.range([this.height,0]),
this.updateAxis(0,r,this.props.xaxis),this.updateAxis(1,o,this.props.yaxis),this.areaGenerator.interpolate(i).x(function(t){return r(s(t))}).y0(function(t){return o(0)}).y1(function(t){return o(a(t))}),this.points=[],n.length&&n[0].forEach(function(e,n){var o=r(s(e));t.points.push({x:o,i:n})})}},{key:"render",value:function(){var t=this,e=this.props,n=e.data,r=(e.xAccessor,e.yAccessor,e.xScale,e.yScale,e.fillColor),o=e.fillOpacity,i=this.baseLayer.selectAll("path.area").data(n);i.exit().remove(),i.enter().append("path").attr("class","area"),i.attr("d",function(e){return t.areaGenerator(e)}).style("fill",r).style("opacity",o)}},{key:"postRender",value:function(){this.props.interactive&&this.baseLayer.selectAll("path.area").on("mouseover",this.onOver.bind(this)).on("mouseout",this.onOut.bind(this))}},{key:"onOver",value:function(){this.hover=!0,this.tooltip&&this.tooltip.show()}},{key:"onOut",value:function(){this.hover=!1,this.tooltip&&this.tooltip.hide()}}]),e}(l["default"]);e["default"]=d,t.exports=e["default"]},function(t,e,n){"use strict";function r(t,e){function n(t){return new o(function(e,n){var o=(0,a["default"])(3);t.forEach(function(t){o.defer(r,t)}),o.awaitAll(function(t){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;r>i;i++)o[i-1]=arguments[i];t?n(t):e.apply(void 0,o)})})}function r(t,n){i.sqlRequest(t.query,function(e,r){if(e)n(e);else{var o=void 0;switch(t.format.toLowerCase()){case"geojson":o=r.features;break;default:o=r.rows}n(null,o)}},{format:t.format,dangerouslyExposedAPIKey:e})}var i=new l["default"](t);return{query:n}}var o=n(106)["default"],i=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var s=n(203),a=i(s),u=n(201),l=i(u);t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var a=n(6),u=n(21),l=n(22),c=function(t){function e(){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,t),i(e,[{key:"componentWillMount",value:function(){if(r(Object.getPrototypeOf(e.prototype),"componentWillMount",this).call(this),!cartodb)throw new Error('CartoDBTileLayer requires `cartodb`. `cartodb` is not currently available as an npm package and therefore must be loaded as a global, e.g. via a CDN script in your index.html, such as <script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.core.js">');this.leafletElement=(0,u.tileLayer)("",this.props),this._getCartoDBTilesTemplates(function(t,e){t?console.error(t):this.leafletElement.setUrl(e.tiles[0])}.bind(this))}},{key:"_getCartoDBTilesTemplates",value:function(t){cartodb.Tiles.getTiles({type:"cartodb",user_name:this.props.userId,sublayers:[{sql:this.props.sql,cartocss:this.props.cartocss}]},function(e,n){!e||n?(n||(n="Empty response."),t(n,e)):t(null,e)})}}],[{key:"propTypes",value:{userId:a.PropTypes.string,sql:a.PropTypes.string,cartocss:a.PropTypes.string},enumerable:!0}]),e}(l.BaseTileLayer);e["default"]=c,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),l=a(u),c=n(30),p=a(c),f=n(7),h=a(f);n(151);var d=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),i(e,null,[{key:"propTypes",value:{width:u.PropTypes.number,height:u.PropTypes.number,scale:u.PropTypes.func,orient:u.PropTypes.string,margin:u.PropTypes.shape({top:u.PropTypes.number,right:u.PropTypes.number,bottom:u.PropTypes.number,left:u.PropTypes.number}),children:l["default"].PropTypes.node,selectedValue:u.PropTypes.number,onClickOrMove:u.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{scale:h["default"].scale.linear().clamp(!0),orient:"bottom",margin:{top:20,right:30,bottom:20,left:30},onClickOrMove:null},enumerable:!0}]),i(e,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){y.create(this.refs.axis,this.props.scale,this.props.orient,this.props.margin,this.props.onClickOrMove);try{this.containerNode=p["default"].findDOMNode(this)}catch(t){}this.forceUpdate()}},{key:"componentDidUpdate",value:function(){y.update(this.refs.axis,this.props.scale,this.props.orient,this.props.margin,this.props.selectedValue,this.props.onClickOrMove);try{this.containerNode=p["default"].findDOMNode(this)}catch(t){}}},{key:"componentWillUnmount",value:function(){y.destroy(this.refs.axis)}},{key:"render",value:function(){var t=u.Children.count(this.props.children);return t>1&&console.warn("ChartSlider is designed to wrap only one child component, but it found "+t+" children."),l["default"].createElement("div",{className:"panorama chart-slider"},l["default"].cloneElement(this.props.children,{width:this.containerNode?this.containerNode.offsetWidth:this.props.width,height:this.props.height}),l["default"].createElement("div",{className:"top-rule",style:{marginLeft:this.props.margin.left+"px",marginRight:this.props.margin.right+"px",width:"calc(100% - "+(this.props.margin.left+this.props.margin.right)+"px)"}}),l["default"].createElement("div",{className:"d3-chart-slider",ref:"axis"}))}}]),e}(l["default"].Component);e["default"]=d;var y={create:function(t,e,n,r,o){this.onBrushMoved=this.onBrushMoved.bind(this),this.node=t;var i=13;this.axisPrimary=h["default"].svg.axis().orient(n).ticks(5).tickFormat(String).tickSize(i),this.axisSecondary=h["default"].svg.axis().orient(n).ticks(10).tickFormat(function(t){return""}).tickSize(i-3),this.axisTertiary=h["default"].svg.axis().orient(n).ticks(40).tickFormat(function(t){return""}).tickSize(i-6),this.brush=h["default"].svg.brush().on("brush",this.onBrushMoved);var s=h["default"].select(t).append("svg");s.append("g").attr("class","axis tertiary"),s.append("g").attr("class","axis secondary"),s.append("g").attr("class","axis primary"),this.handle=s.append("g").attr("class","handle");var a=t.offsetHeight-r.bottom+i+3,u=this.handle.append("g").attr("class","handle-elements");u.append("line").attr({x1:0,x2:0,y1:0,y2:a});var l=10;u.append("path").attr("d","M 30 0 L 70 0 C 85 0 93.29179606750063 13.416407864998739 86.58359213500125 26.832815729997478 L 63.41640786499873 73.16718427000252 C 56.708203932499366 86.58359213500125 43.29179606750063 86.58359213500125 36.58359213500126 73.16718427000252 L 13.416407864998739 26.832815729997478 C 6.708203932499369 13.416407864998739 15 0 30 0 Z ").attr("transform","scale("+l/100+") translate(-50, 0)"),u.append("path").attr("d","M 30 0 L 70 0 C 85 0 93.29179606750063 13.416407864998739 86.58359213500125 26.832815729997478 L 63.41640786499873 73.16718427000252 C 56.708203932499366 86.58359213500125 43.29179606750063 86.58359213500125 36.58359213500126 73.16718427000252 L 13.416407864998739 26.832815729997478 C 6.708203932499369 13.416407864998739 15 0 30 0 Z ").attr("transform","rotate(180) scale("+l/100+") translate(-50, "+-(100/l*a)+")"),this.update(t,e,n,r)},update:function(t,e,n,r,o,i){this.node=t,this.onClickOrMove=i,e.range([0,t.offsetWidth-r.left-r.right]),this.axisPrimary.scale(e),this.axisSecondary.scale(e),this.axisTertiary.scale(e),this.brush.x(e);var s="translate("+r.left+", "+(t.offsetHeight-r.bottom)+")",a=h["default"].select(t).select("svg");a.attr("width","100%").attr("height","100%"),a.select(".axis.primary").call(this.axisPrimary).attr("transform",s).selectAll("text").attr("y",Math.floor(2/3*r.bottom)),a.select(".axis.secondary").call(this.axisSecondary).attr("transform",s),a.select(".axis.tertiary").call(this.axisTertiary).attr("transform",s),this.handle.call(this.brush).attr("transform","translate("+r.left+", 0)").select(".background").on("mousedown.brush",this.onBrushMoved).on("touchstart.brush",this.onBrushMoved),this.handle.selectAll(".background").attr("height","100%"),"undefined"!=typeof o&&this.onSelectedValueChanged(o)},destroy:function(t){h["default"].select(t).html(""),this.node=null,this.axisPrimary=null,this.axisSecondary=null,this.axisTertiary=null,this.brush=null,this.handle=null},onBrushMoved:function(){var t=this.brush.x(),e=t.domain(),n=h["default"].mouse(h["default"].select(this.node).select(".axis")[0][0])[0],r=t.invert(n);r=Math.round(Math.max(e[0],Math.min(e[1],r))),this.onClickOrMove&&this.onClickOrMove(r)},onSelectedValueChanged:function(t){this.handle.call(this.brush.extent([t,t+2]));var e=this.brush.x()(t);this.handle.select(".handle-elements").attr("transform","translate("+e+", 0)")}};t.exports=e["default"]},function(t,e,n){"use strict";var r=n(23)["default"],o=n(104)["default"];Object.defineProperty(e,"__esModule",{value:!0});var i=n(61),s=function(){function t(t){var e=r({},h,t);for(var n in e)null==e[n]?delete e[n]:n===p&&(e[n]=l(e[p]));var i="#"+o(e).map(function(t){return t+"="+e[t]}).join("&");document.location.hash!==i&&document.location.replace(i)}function e(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return t?h[t]:r({},h)}function n(t,e){h=t,e||f.emit(c,r({},h))}function s(){n(a(window.location.hash))}function a(t){var e=t.replace(/^#\/?|\/$/g,"").split("&").reduce(function(t,e){return e=e.split("="),e[0]===p&&(e[1]=u(e[1])),t[e[0]]=e[1],t},{});return e}function u(t){if(t=t.split("/"),3==t.length){var e=parseInt(t[0],10),n=parseFloat(t[1]),r=parseFloat(t[2]);return isNaN(e)||isNaN(n)||isNaN(r)?!1:{center:[n,r],zoom:e}}return!1}function l(t){var e=void 0,n=void 0,r=t.zoom,o=Math.max(0,Math.ceil(Math.log(r)/Math.LN2));return Array.isArray(t.center)?(e=t.center[0],n=t.center[1]):(e=t.center.lat,n=t.center.lng),[r,e.toFixed(o),n.toFixed(o)].join("/")}var c="hashChanged",p="loc",f={},h={};return r(f,i.EventEmitter.prototype),window.addEventListener("hashchange",s),n(a(window.location.hash),!0),f.EVENT_HASH_CHANGED=c,f.MAP_STATE_KEY=p,f.updateHash=t,f.getState=e,f}();e["default"]=s,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(11)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(7),c=u(l),p=n(46),f=u(p),h=n(77),d=u(h),y=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.chartConstructor=d["default"]}return o(e,t),i(e,null,[{key:"propTypes",value:a({},f["default"].propTypes),enumerable:!0},{key:"defaultProps",value:a({},f["default"].defaultProps,{xScale:c["default"].scale.linear(),yScale:c["default"].scale.ordinal()}),enumerable:!0}]),e}(f["default"]);e["default"]=y,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(7),l=a(u),c=n(47),p=a(c),f=function(t){function e(){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,t),i(e,[{key:"preRender",value:function(){var t=this.props,e=t.data,n=t.xAccessor,r=t.yAccessor,o=t.xScale,i=t.yScale;i.rangeRoundBands([0,this.height],this.barSpacing),i.domain(e.map(function(t){return r(t)})),o.range([0,this.width]),o.domain([0,l["default"].max(e,function(t){return n(t)})]),this.updateAxis(0,o,this.props.xaxis),this.updateAxis(1,i,this.props.yaxis)}},{key:"render",value:function(){var t=this.props,e=t.data,n=t.xAccessor,r=t.yAccessor,o=t.xScale,i=t.yScale,s=this.base.selectAll(".bar").data(e);s.exit().remove(),s.enter().append("rect").attr("class","bar"),s.attr("x","0").attr("y",function(t){return i(r(t))}).attr("width",function(t){return o(n(t))}).attr("height",i.rangeBand())}}]),e}(p["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(23)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(202),c=n(6),p=u(c);n(153);var f=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.onIntroExit=this.onIntroExit.bind(this),this.initIntro()}return o(e,t),i(e,null,[{key:"propTypes",value:{open:c.PropTypes.bool,step:c.PropTypes.oneOfType([c.PropTypes.number,c.PropTypes.string]),steps:c.PropTypes.arrayOf(c.PropTypes.shape({element:c.PropTypes.string,intro:c.PropTypes.string,position:function(t,e,n){return/top|right|bottom|left/.test(t[e])?void 0:new Error("`position` must be one of 'top', 'right', 'bottom', or 'left'.")}})).isRequired,config:c.PropTypes.object,onExit:c.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{open:!1,step:0,steps:[],config:{showStepNumbers:!1,skipLabel:"×",nextLabel:"⟩",prevLabel:"⟨",doneLabel:"×"},onExit:null},enumerable:!0}]),i(e,[{key:"initIntro",value:function(){this.intro=(0,l.introJs)(document.querySelector("body")),this.intro.onexit(this.onIntroExit),this.intro.oncomplete(this.onIntroExit),this.introIsOpen=!1}},{key:"onIntroExit",value:function(){this.introIsOpen=!1,this.props.onExit&&this.props.onExit()}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){if(this.props.open){if(this.introIsOpen)return;if(this.intro._introItems)this.props.step&&1!==this.props.step?this.intro.goToStep(this.props.step-1).start():this.intro.start();else{var t={steps:this.props.steps};t=a(t,this.props.config),this.intro.setOptions(t),this.intro.goToStep(this.props.step).start()}this.introIsOpen=!0}else this.intro.exit()}},{key:"getDefaultState",value:function(){return{}}},{key:"render",value:function(){return p["default"].createElement("div",{className:"panorama intro-manager"})}}]),e}(p["default"].Component);e["default"]=f,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),l=a(u),c=n(31);n(154);var p=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.onItemClick=this.onItemClick.bind(this),this.onArrowMouseDown=this.onArrowMouseDown.bind(this),this.onArrowMouseUp=this.onArrowMouseUp.bind(this),this.animateScrollPosition=this.animateScrollPosition.bind(this)}return o(e,t),i(e,null,[{key:"propTypes",value:{title:u.PropTypes.string,items:u.PropTypes.array.isRequired,displayArrow:u.PropTypes.bool,liClassNames:u.PropTypes.string,selectedIndex:u.PropTypes.oneOfType([u.PropTypes.string,u.PropTypes.number]),selectedItem:u.PropTypes.object,onItemSelected:u.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{title:"",items:[],displayArrow:!0,liClassNames:"",selectedIndex:"",selectedItem:null,onItemSelected:null},enumerable:!0}]),i(e,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.scrollToSelectedItem()}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){this.scrollToSelectedItem()}},{key:"onItemClick",value:function(t){t.currentTarget&&t.currentTarget.dataset&&(this.props.onItemSelected&&this.props.onItemSelected(this.props.items[t.currentTarget.dataset.index],t.currentTarget.dataset.index),c.PanoramaDispatcher.ItemSelector.selected(this.props.items[t.currentTarget.dataset.index],t.currentTarget.dataset.index))}},{key:"onArrowMouseDown",value:function(t){var e=void 0;if(t.target.classList.contains("up-arrow")?e=-1:t.target.classList.contains("down-arrow")&&(e=1),e){var n=this.refs["item-list"],r=16,o=0,i=n.querySelector("li"),s=window.getComputedStyle(i),a=i.offsetHeight+(s?parseFloat(s["margin-bottom"].replace("px","")):0);this.arrowMouseUp=!1;var u=function(){o--<=1&&(this.scrollToPosition(n.scrollTop+e*a),o=r=Math.max(1,Math.floor(.75*r))),this.arrowMouseUp||window.requestAnimationFrame(u)}.bind(this);window.requestAnimationFrame(u)}}},{key:"onArrowMouseUp",value:function(t){this.arrowMouseUp=!0}},{key:"scrollToPosition",value:function(t){"undefined"==typeof this.targetScrollPosition?(this.targetScrollPosition=t,this.animateScrollPosition()):this.targetScrollPosition=t}},{key:"scrollToSelectedItem",value:function(){var t=this.refs["item-list"],e=t.querySelector(".selected");e&&this.scrollToPosition(e.offsetTop-t.offsetHeight)}},{key:"animateScrollPosition",value:function(){var t=this.refs["item-list"],e=void 0;"undefined"==typeof this.scrollPosition&&(this.scrollPosition=t.scrollTop),e=this.targetScrollPosition-this.scrollPosition,Math.abs(e)>1?(this.scrollPosition+=.25*e,t.scrollTop=this.scrollPosition,window.requestAnimationFrame(this.animateScrollPosition)):(t.scrollTop=this.targetScrollPosition,this.targetScrollPosition=void 0,this.scrollPosition=void 0)}},{key:"getDefaultState",value:function(){return{}}},{key:"render",value:function(){var t=this,e=void 0;return l["default"].createElement("div",{className:"panorama item-selector"},this.props.title?l["default"].createElement("h3",null,this.props.title):null,this.props.displayArrow?l["default"].createElement("div",{className:"scroll-arrow up-arrow",onMouseDown:this.onArrowMouseDown,onMouseUp:this.onArrowMouseUp}):null,l["default"].createElement("ul",{ref:"item-list"},this.props.items.map(function(n,r){return e=t.props.selectedItem&&t.props.selectedItem.id==n.id||t.props.selectedItem===n||t.props.selectedIndex===r,l["default"].createElement("li",{className:"item "+t.props.liClassNames+(e?" selected":""),"data-index":r,key:r,onClick:t.onItemClick},l["default"].createElement("span",null,n.name.toUpperCase()))})),this.props.displayArrow?l["default"].createElement("div",{className:"scroll-arrow down-arrow",onMouseDown:this.onArrowMouseDown,onMouseUp:this.onArrowMouseUp}):null)}}]),e}(l["default"].Component);e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(33)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(6),c=(u(l),n(22)),p=n(21),f=n(193),h=u(f),d=n(17),y=(u(d),n(29)),v=(u(y),n(67)),m=(u(v),["stroke","color","weight","opacity","fill","fillColor","fillOpacity","fillRule","dashArray","lineCap","lineJoin","clickable","pointerEvents","className"]);n(155);var g=function(t){function e(){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.mouseTimer=null,this.currentId=null,this.hasTooltip=!1,this.state={showTooltip:!1,tooltipPosition:null,tooltipContent:""}}return o(e,t),i(e,null,[{key:"PropTypes",value:{styler:l.PropTypes.func,onEachFeature:l.PropTypes.func,setTooltipContent:l.PropTypes.func,selectedStyle:l.PropTypes.object,onFeatureClick:l.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{selectedStyle:{}},enumerable:!0}]),i(e,[{key:"shouldComponentUpdate",value:function(t){return!0}},{key:"componentWillMount",value:function(){r(Object.getPrototypeOf(e.prototype),"componentWillMount",this).call(this);var t=this.props.data,n=this.setGeoJSONOptions();this.setTooltipFlag(),this.leafletElement=(0,p.geoJson)(t,n)}},{key:"componentDidMount",value:function(){var t=this.props.map;this.leafletElement.addTo(t),this.hasTooltip&&t.on("mousemove",this.onMouseMove.bind(this))}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(t){var e=this.props.data;t.data!==e&&this.leafletElement.addData(e)}},{key:"setGeoJSONOptions",value:function(){var t=a(this.props,[]);return{style:t.style||null,onEachFeature:t.onEachFeature||this.onEachFeature.bind(this),filter:t.filter||null,pointToLayer:t.pointToLayer||null,coordsToLatLng:t.coordsToLatLng||null}}},{key:"setTooltipFlag",value:function(){var t=this,e=this.props.children;l.Children.forEach(e,function(e){e.type&&e.type.name&&"Tooltip"===e.type.name&&(t.hasTooltip=!0)})}},{key:"getPathOptions",value:function(t){return(0,h["default"])(t,m)}},{key:"getTooltipContent",value:function(t){return"function"==typeof this.props.setTooltipContent?this.props.setTooltipContent(t):""}},{key:"onMouseOver",value:function(t){if(this.currentId!==t.target){if(t.target.setStyle(this.props.selectedStyle),this.currentId!==t.target){this.currentId=t.target;var e=this.getTooltipContent(t.target.feature);this.setState({showTooltip:!0,tooltipPosition:t.latlng,tooltipContent:e})}L.Browser.ie||L.Browser.opera||t.target.bringToFront()}}},{key:"onMouseOut",value:function(t){var e=this;this.leafletElement.resetStyle(t.target),this.currentId=null,clearTimeout(this.mouseTimer),this.mouseTimer=setTimeout(function(){null===e.currentId&&(e.currentId=null,e.setState({showTooltip:!1}))},200)}},{key:"onMouseMove",value:function(t){this.currentId&&(p.DomEvent.stopPropagation(t),this.setState({tooltipPosition:t.latlng}))}},{key:"onClick",value:function(t){"function"==typeof this.props.onFeatureClick&&this.props.onFeatureClick(t.target,this.props.map)}},{key:"onEachFeature",value:function(t,e){this.hasTooltip&&e.on({mouseover:this.onMouseOver.bind(this),mouseout:this.onMouseOut.bind(this)}),e.on("click",this.onClick.bind(this))}},{key:"render",value:function(){return this.renderChildrenWithProps({tooltipContainer:this.leafletElement,popupContainer:this.leafletElement,position:this.state.tooltipPosition,isOpen:this.state.showTooltip,content:this.state.tooltipContent})}}]),e}(c.MapLayer);e["default"]=g,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(33)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(6),c=(u(l),n(22)),p=(n(21),n(82)),f=function(t){function e(){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this)}return o(e,t),i(e,null,[{key:"propTypes",value:{center:c.PropTypes.latlng.isRequired,outerRadius:l.PropTypes.number.isRequired,innerRadius:l.PropTypes.number.isRequired},enumerable:!0},{key:"defaultProps",value:{},enumerable:!0}]),i(e,[{key:"componentWillMount",value:function(){var t=this.props,n=t.center,o=t.outerRadius,i=t.innerRadius,s=a(t,["center","outerRadius","innerRadius"]);r(Object.getPrototypeOf(e.prototype),"componentWillMount",this).call(this),this.leafletElement=new p.LeafletDonut(n,o,i,this.getPathOptions(s))}},{key:"componentDidUpdate",value:function(t){this.props.center!==t.center&&this.leafletElement.setLatLng(this.props.center),this.props.outerRadius===t.outerRadius&&this.props.innerRadius===t.innerRadius||this.leafletElement.setRadius(this.props.outerRadius,this.props.innerRadius),this.setStyleIfChanged(t,this.props)}}]),e}(c.Path);e["default"]=f,t.exports=e["default"]},function(t,e,n){"use strict";var o=n(48)["default"];Object.defineProperty(e,"__esModule",{value:!0});var i=n(21),s=o(i),a=function(t){return t.Circle.extend({initialize:function(e,n,r,o){t.Path.prototype.initialize.call(this,o),this._latlng=t.latLng(e),this._mOuterRadius=n,this._mInnerRadius=this._validateInnerRadius(n,r)},setRadius:function(t,e){return this._mOuterRadius=t,this._mInnerRadius=this._validateInnerRadius(t,e),this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,n=this._map.latLngToLayerPoint([e.lat,e.lng-t[0]]),r=this._map.latLngToLayerPoint([e.lat,e.lng-t[1]]);this._point=this._map.latLngToLayerPoint(e),this._outerRadius=Math.max(this._point.x-n.x,1),this._innerRadius=Math.max(this._point.x-r.x,1)},getBounds:function(){var e=this._getLngRadius()[0],n=this._getLatRadius()[0],r=this._latlng;return new t.LatLngBounds([r.lat-n,r.lng-e],[r.lat+n,r.lng+e])},getRadius:function(){return[this._mOuterRadius,this._mInnerRadius]},_getLatRadius:function(){return[this._mOuterRadius/40075017*360,this._mInnerRadius/40075017*360]},_getLngRadius:function(){var e=this._getLatRadius();return[e[0]/Math.cos(t.LatLng.DEG_TO_RAD*this._latlng.lat),e[1]/Math.cos(t.LatLng.DEG_TO_RAD*this._latlng.lat)]},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._outerRadius,n=this._point;return n.x-e>t.max.x||n.y-e>t.max.y||n.x+e<t.min.x||n.y+e<t.min.y},_validateInnerRadius:function(t,e){return e>=t?t-1:e},getArc:function(t,e,n){var r=t.x-.01,o=t.y-e,i=t.y-n;return["M",t.x,o,"A",e,e,0,1,1,r,o,"M",r,i,"A",n,n,0,1,0,t.x,i,"Z"].join(" ")},getPathString:function(){var e=this._point,n=this._outerRadius,o=this._innerRadius;return this._checkIfEmpty()?"":t.Browser.svg?this.getArc(e,n,o):(e._round(),r=Math.round(r),"AL "+e.x+","+e.y+" "+n+","+n+" 0,23592600")}})}(s);e.LeafletDonut=a},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(33)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(6),c=n(22),p=n(21),f=n(67),h=u(f),d=function(t){function e(){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,t),i(e,[{key:"componentWillMount",value:function(){r(Object.getPrototypeOf(e.prototype),"componentWillMount",this).call(this);var t=this.props,n=(t.children,t.map,a(t,["children","map"])),o=(0,h["default"])({},n);o.className=o.className?o.className+" panorama-leaflet-tip":"panorama-leaflet-tip",o.closeButton=!1,o.offset=o.offset||[0,-3],this.leafletElement=(0,p.popup)(o)}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.map,r=e.position,o=e.isOpen,i=e.content;r!==t.position&&this.leafletElement.setLatLng(r),i!==t.content&&this.leafletElement.setContent(i),o!==t.isOpen&&(o?(this.leafletElement.openOn(n),this.renderPopupContent()):(n.closePopup(),this.removePopupContent()))}}],[{key:"propTypes",value:{children:l.PropTypes.node,map:l.PropTypes.instanceOf(p.Map),tooltipContainer:l.PropTypes.object,position:c.PropTypes.latlng},enumerable:!0}]),e}(c.Popup);e["default"]=d,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),l=a(u),c=n(31);n(156);var p=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.onItemClick=this.onItemClick.bind(this),this.onItemEnter=this.onItemEnter.bind(this),this.onItemLeave=this.onItemLeave.bind(this)}return o(e,t),i(e,null,[{key:"propTypes",value:{items:u.PropTypes.array.isRequired,selectedItem:u.PropTypes.string,onItemSelected:u.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{items:[],selectedItem:"",onItemSelected:null},enumerable:!0}]),i(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"onItemClick",value:function(t){t.currentTarget&&t.currentTarget.dataset&&(this.props.onItemSelected&&this.props.onItemSelected(t.currentTarget.dataset.item,this.props.items.indexOf(t.currentTarget.dataset.item)),c.PanoramaDispatcher.Legend.selected(t.currentTarget.dataset.item,this.props.items.indexOf(t.currentTarget.dataset.item)))}},{key:"onItemEnter",value:function(t){}},{key:"onItemLeave",value:function(t){}},{key:"render",value:function(){var t=this;return l["default"].createElement("div",{className:"panorama legend"},l["default"].createElement("ul",null,this.props.items.map(function(e,n){var r=t.props.selectedItem===e||t.props.selectedItem==n;return l["default"].createElement("li",{className:"item"+(r?" selected":""),"data-item":e,key:e,onClick:t.onItemClick,onMouseEnter:t.onItemEnter,onMouseLeave:t.onItemLeave},l["default"].createElement("span",null,t.capitalize(e)))})))}},{key:"capitalize",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}]),e}(l["default"].Component);e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(11)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(7),c=(u(l),n(6)),p=n(14),f=u(p),h=n(86),d=u(h);n(157);var y=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.chartConstructor=d["default"]}return o(e,t),i(e,null,[{key:"propTypes",value:a({},f["default"].propTypes,{strokeColor:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.number]),strokeOpacity:c.PropTypes.number,isInterpolated:c.PropTypes.bool,interpolate:c.PropTypes.string}),enumerable:!0},{key:"defaultProps",value:a({},f["default"].defaultProps,{className:"line-chart",isInterpolated:!1,interpolate:"basis",xaxis:{className:"x axis",orient:"bottom",position:"bottom",attr:{dx:"0",dy:"0.5em"},style:{"text-anchor":"middle"}},yaxis:{className:"y axis",orient:"left"}}),enumerable:!0}]),e}(f["default"]);e["default"]=y,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(13),l=a(u),c=n(7),p=a(c),f=n(18),h=a(f),d=function(t){function e(){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,t),i(e,[{key:"willMount",value:function(){this.props.xaxis&&this.setAxis(new h["default"](this.props.xaxis,this.props.xScale)),this.props.yaxis&&this.setAxis(new h["default"](this.props.yaxis,this.props.yScale)),this.lineGenerator=p["default"].svg.line()}},{key:"onMount",value:function(t){r(Object.getPrototypeOf(e.prototype),"onMount",this).call(this,t),this.lineLayer=this.base.append("g").classed("line-layer",!0),this._render()}},{key:"preRender",value:function(){var t=this.props,e=(t.data,t.xAccessor),n=t.yAccessor,r=t.xScale,o=t.yScale,i=t.isInterpolated,s=t.interpolate;r.range([0,this.width]),o.range([this.height,0]),this.updateAxis(0,r,this.props.xaxis),this.updateAxis(1,o,this.props.yaxis);var a=i?s:"linear";this.lineGenerator.interpolate(a).x(function(t){return r(e(t))}).y(function(t){return o(n(t))})}},{key:"render",value:function(){var t=this,e=this.props,n=e.data,r=(e.xAccessor,e.yAccessor,e.xScale,e.yScale,e.strokeColor),o=e.strokeOpacity,i=this.lineLayer.selectAll("path.line").data(n);i.exit().remove(),i.enter().append("path").attr("class","line"),i.attr("d",function(e){return t.lineGenerator(e)}).style({stroke:r,strokeOpacity:o})}},{key:"postRender",value:function(){}}]),e}(l["default"]);e["default"]=d,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(11)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(7),c=(u(l),n(6)),p=n(14),f=u(p),h=n(88),d=u(h);n(158);var y=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.chartConstructor=d["default"]}return o(e,t),i(e,null,[{key:"propTypes",value:a({},f["default"].propTypes,{projection:c.PropTypes.string,mapScale:c.PropTypes.oneOfType([c.PropTypes.number,c.PropTypes.string]),selected:c.PropTypes.any,selectedAccessor:c.PropTypes.func,hoverStyle:c.PropTypes.object}),enumerable:!0},{key:"defaultProps",value:a({},f["default"].defaultProps,{projection:"albersUsa",className:"map choropleth",mapScale:500}),enumerable:!0}]),e}(f["default"]);e["default"]=y,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(107)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(13),c=u(l),p=n(7),f=u(p),h=function(t){function e(){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,t),i(e,[{key:"willMount",value:function(){}},{key:"onMount",value:function(t){r(Object.getPrototypeOf(e.prototype),"onMount",this).call(this,t),this._path=f["default"].geo.path(),this._projection=f["default"].geo[this.props.projection](),this._render(),this._selected=null,this._hoverElement=null}},{key:"preRender",value:function(){this.updateProjection()}},{key:"render",value:function(){var t=this.props,e=t.data,n=t.styler,r=t.interactive,o=t.selected,i=t.selectedAccessor;if(e&&e.features){var s=this,a=this.base.selectAll("path").data(e.features);
a.exit().remove(),a.enter().append("path").attr("class","geometry").attr("d",this._path),a.each(function(t){f["default"].select(this).style(n(t))}),r&&(f["default"].selectAll(".hover-dupe").remove(),this._hoverElement=null,a.on("click",null).on("mouseover",null).on("mouseout",null).on("click",this.dispatch.click).on("mouseenter",function(t){i(t)!==o&&(s._hoverElement=s.bringToTop(this,"hover-dupe sel-"+i(t),s.props.hoverStyle||null),s.dispatch.mouseOver(t))}).on("mouseleave",function(t){s._hoverElement&&s._hoverElement.remove(),s._hoverElement=null,s.dispatch.mouseOut(t)})),o&&o!==this._selected&&(this._selected=o,f["default"].selectAll(".selected-dupe").remove(),a.filter(function(t){return i(t)===o}).each(function(){s.bringToTop(this,"selected-dupe")}))}}},{key:"postRender",value:function(){}},{key:"bringToTop",value:function(t,e,n){var r=f["default"].select(t.parentNode.appendChild(t.cloneNode(!0),t.nextSibling)).classed(e,!0);return n&&r.style(n),r}},{key:"updateProjection",value:function(){var t=this.props,e=t.data,n=t.mapScale,r=t.projection,o=n,i=[this.width/2,this.height/2];if("auto"===n){var s=this.fitMap(e),u=a(s,2);o=u[0],i=u[1]}this._projection=f["default"].geo[r]().scale(o).translate(i),this._path.projection(this._projection)}},{key:"fitMap",value:function(t){var e=this.props.projection,n=f["default"].geo[e]().scale(1).translate([0,0]),r=f["default"].geo.path().projection(n),o=r.bounds(t),i=.95/Math.max((o[1][0]-o[0][0])/this.width,(o[1][1]-o[0][1])/this.height),s=[(this.width-i*(o[1][0]+o[0][0]))/2,(this.height-i*(o[1][1]+o[0][1]))/2];return[i,s]}}]),e}(c["default"]);e["default"]=h,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),l=a(u),c=n(200),p=a(c);n(159);var f=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),i(e,null,[{key:"propTypes",value:{nav_data:u.PropTypes.array.isRequired,show_menu:u.PropTypes.bool,on_hamburger_click:u.PropTypes.func,style:u.PropTypes.object,title:u.PropTypes.string,home_url:u.PropTypes.string,links:u.PropTypes.array,link_separator:u.PropTypes.string},enumerable:!0},{key:"defaultProps",value:{title:"American Panorama",home_url:"http://dsl.richmond.edu/panorama",links:[],link_separator:" ",nav_data:{},show_menu:!1,on_hamburger_click:null,style:{overlay:{position:"fixed",top:0,left:0,backgroundColor:"rgba(0,0,0,0.5)"},content:{position:"absolute",top:0,left:0,bottom:"auto",right:"auto",border:0,background:"rgba(0,0,0,0.5)",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:0}}},enumerable:!0}]),i(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"computeDimensions",value:function(){return(window.innerWidth-40*this.props.nav_data.length)/this.props.nav_data.length}},{key:"render",value:function(){var t=this;return l["default"].createElement("div",null,l["default"].createElement("div",{id:"hamburger"},l["default"].createElement("img",{src:"http://dsl.richmond.edu/panorama/static/images/hamburger.png",onClick:this.props.on_hamburger_click})),l["default"].createElement(p["default"],{isOpen:this.props.show_menu,onRequestClose:this.props.on_hamburger_click,className:"nav_header",style:this.props.style},l["default"].createElement("div",{id:"nav_header"},l["default"].createElement("div",{id:"navburger"},l["default"].createElement("img",{src:"http://dsl.richmond.edu/panorama/static/images/hamburger.png",onClick:this.props.on_hamburger_click})),this.props.title&&this.props.home_url?l["default"].createElement("h1",null,l["default"].createElement("a",{href:this.props.home_url},this.props.title)):"",l["default"].createElement("h2",null,this.props.links.map(function(e,n){return l["default"].createElement("a",{href:e.url,key:"pan_nav_links_"+n},n<t.props.links.length-1?e.name+t.props.link_separator:e.name)})),l["default"].createElement("div",{id:"maps"},this.props.nav_data.map(function(e,n){return l["default"].createElement("div",{className:"pan_nav_item",key:"pan_nav_item_"+n,style:{width:t.computeDimensions()+"px"}},l["default"].createElement("a",{href:e.url},l["default"].createElement("img",{src:e.screenshot,style:{width:t.computeDimensions()+"px"}})),l["default"].createElement("br",null),l["default"].createElement("h4",null,l["default"].createElement("a",{href:e.url},e.title)))})))))}}]),e}(l["default"].Component);e["default"]=f,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(11)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(6),c=(u(l),n(7)),p=(u(c),n(14)),f=u(p),h=n(45),d=(u(h),n(91)),y=u(d);n(160);var v=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.chartConstructor=y["default"],this.chartIdAccessor=t.chartIdAccessor}return o(e,t),i(e,null,[{key:"propTypes",value:a({},f["default"].propTypes,{areaChartData:l.PropTypes.array,chartSpacing:l.PropTypes.number,colorPalette:l.PropTypes.array,selectedChartId:l.PropTypes.oneOfType([l.PropTypes.string,l.PropTypes.number]),chartIdAccessor:l.PropTypes.func,metadataAccessor:l.PropTypes.func,interpolate:l.PropTypes.string,circleRadius:l.PropTypes.number}),enumerable:!0},{key:"defaultProps",value:a({},f["default"].defaultProps,{className:"offset-area-chart",areaChartData:[],chartSpacing:4,colorPalette:null,selectedChartId:null,chartIdAccessor:null,metadataAccessor:null,interpolate:"basis",circleRadius:2}),enumerable:!0}]),e}(f["default"]);e["default"]=v,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(13),l=a(u),c=n(7),p=a(c),f=n(18),h=(a(f),function(t){function e(){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,t),i(e,[{key:"willMount",value:function(){var t=this.props,e=t.xAccessor,n=t.yAccessor,r=t.xScale,o=t.yScale,i=t.interpolate;this.areaGenerator=p["default"].svg.area().interpolate(i).x(function(t){return r(e(t))}).y0(function(t){return o(0)}).y1(function(t){return o(n(t))})}},{key:"onMount",value:function(){r(Object.getPrototypeOf(e.prototype),"onMount",this).call(this),this.lineLayer=this.base.append("g").classed("offset-area-lines",!0),this._render()}},{key:"preRender",value:function(){var t=this.props,e=t.xScale,n=t.yScale,r=(t.xAccessor,t.yAccessor,t.areaChartConfig),o=t.interpolate,i=this.height-this.props.areaChartData.length*this.props.chartSpacing;e.range([0,this.width]),n.range([i,0]),this.areaGenerator=p["default"].svg.area().interpolate(o).x(function(t){return e(r.xAccessor(t))}).y0(function(t){return n(0)}).y1(function(t){return n(r.yAccessor(t))})}},{key:"areaOffsetTranslation",value:function(t){var e=this.props.chartSpacing;return"translate(0,"+e*t+")"}},{key:"lineOffsetTranslation",value:function(t){var e=this.props,n=e.data,r=e.chartSpacing,o=e.yScale,i=(o(0),n.length-t),s=-r*i;return"translate(0,"+s+")"}},{key:"render",value:function(){var t=this,e=this.props,n=e.data,r=e.xAccessor,o=(e.yAccessor,e.xScale),i=e.yScale,s=(e.fillColor,e.fillOpacity,e.areaChartData),a=e.colorPalette,u=e.metadataAccessor,l=e.chartIdAccessor,c=e.selectedChartId,p=e.circleRadius,f=(e.interactive,this.base.selectAll("g.area-container").data(s));f.exit().remove(),f.enter().append("g").attr("class","area-container").append("path").attr("class","area"),f.attr("transform",function(e,n){return t.areaOffsetTranslation(n)}).classed("selected",function(t){return l(t)===c}).selectAll("path").attr("d",function(e){return t.areaGenerator(e)}).attr("fill",function(t,e,n){return a[n%a.length]});var h=i(0)+this.props.areaChartData.length*this.props.chartSpacing,d=o.domain();this.lineLayer.attr("transform","translate(0, "+h+")");var y=this.lineLayer.selectAll("g.line-group").data(n);y.exit().remove(),y.enter().append("g").attr("class","line-group").append("line").attr("class","lifespan"),y.attr("transform",function(e,n){return t.lineOffsetTranslation(n)}).classed("selected",function(t){return l(t)==c}).selectAll("line").attr("x1",function(t){return o(Math.max(r(t,0),d[0]))}).attr("x2",function(t){return o(Math.min(r(t,1),d[1]))}).attr("y1",0).attr("y2",0).style("stroke",function(t,e){return a[e%a.length]});var v=y.selectAll("circle").data(function(t){return u(t)});v.exit().remove(),v.enter().append("circle"),v.attr("cx",function(t){return o(Math.max(t,d[0]))}).attr("cy",0).attr("r",p).style("fill",function(t,e,n){return a[n%a.length]})}},{key:"postRender",value:function(){}}]),e}(l["default"]));e["default"]=h,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(11)["default"],u=n(1)["default"],l=n(48)["default"];Object.defineProperty(e,"__esModule",{value:!0});var c=n(6),p=u(c),f=n(7),h=l(f);n(161);var d=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),i(e,null,[{key:"propTypes",value:{data:c.PropTypes.array.isRequired,onItemClick:c.PropTypes.func,loading:c.PropTypes.bool,noDataAvailableMsg:c.PropTypes.string,punchcardOptions:c.PropTypes.object,selectAccessor:c.PropTypes.func,textValueFormatter:c.PropTypes.func,headerMargin:c.PropTypes.number},enumerable:!0},{key:"defaultProps",value:{data:[],onItemClick:null,loading:!0,noDataAvailableMsg:"No commodities data available for this canal in the selected year.",radiusExtent:[2,10],textValueFormatter:function(t){return t},headerMargin:0},enumerable:!0}]),i(e,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.renderVisualization()}},{key:"componentDidUpdate",value:function(){y.destroy(this.refs.content),this.renderVisualization()}},{key:"componentWillUnmount",value:function(){y.destroy(this.refs.content)}},{key:"render",value:function(){return p["default"].createElement("div",{className:"panorama punchcard"},this.renderPlaceholder(),p["default"].createElement("div",{className:"content",ref:"content",style:{marginTop:this.props.headerMargin+"px"}}))}},{key:"renderVisualization",value:function(){!this.isEmpty(this.props.data)&&this.refs.content&&y.update(this.refs.content,a({},this.props))}},{key:"renderPlaceholder",value:function(){var t=this.props,e=t.loading,n=t.noDataAvailableMsg;return e?p["default"].createElement("div",{className:"placeholder",ref:"placeholder"},p["default"].createElement("h4",null,"Loading...")):!this.props.loading&&this.isEmpty(this.props.data)?p["default"].createElement("div",{className:"placeholder",ref:"placeholder"},p["default"].createElement("h4",null,n)):null}},{key:"isEmpty",value:function(t){return t.length<1}}]),e}(p["default"].Component);e["default"]=d;var y={_setTextValueFormatter:function(t){return t},setTextValueFormatter:function(t){this._setTextValueFormatter=t},ROW_HEIGHT:25,COMMODITY_TEXT_OFFSET_Y:5,update:function(t,e){var n=this,r=e.colorScale,o=e.valueAccessor,i=e.onItemClick,s=e.textValueFormatter,a=e.selected,u=e.selectAccessor;"function"==typeof s&&this.setTextValueFormatter(s);var l=e.radiusExtent[1],c=this,p=h.scale.sqrt().range(e.radiusExtent).domain([1,e.radiusMaxValue]),f=p.domain(),d=f[0]+Math.sqrt(.25)*(f[1]-f[0]),y=h.select(t).selectAll("div").data(e.data).enter().append("div").attr("style",function(t){return"color: "+r(e.colorAccessor(t))+";"}).attr("class","category");y.append("h4").text(function(t){return t.name}),y=y.append("svg").attr("height",function(t){return t.commodities.length*c.ROW_HEIGHT}).style("stroke",function(t){return r(e.colorAccessor(t))}).style("fill",function(t){return r(e.colorAccessor(t))}),this.categoryNodeWidth=(y.node().offsetWidth||y.node().getBoundingClientRect().width)-2.5*this.ROW_HEIGHT;var v=y.selectAll("g").data(function(t){return t.commodities}).enter().append("g");v.classed("selected",function(t){return u(t)===a}),v.append("circle").attr("r",function(t){var e=o(t);return e?p(e):d}).style("fill",function(t){return o(t)?null:"none"}).style("stroke",function(t){return o(t)?"none":null}).style("stroke-width",function(t){return o(t)?null:2}),v.append("text").text(function(t){return t.name}).style("stroke","none").attr("x",2*c.ROW_HEIGHT).attr("y",c.COMMODITY_TEXT_OFFSET_Y).call(this.wrap,this.categoryNodeWidth);var m=void 0;y.each(function(t,e){h.select(this).selectAll("g").each(function(t,e){e||(m=0);var n=h.select(this);n.attr("transform","translate("+.5*c.ROW_HEIGHT+", "+(e+.5+m)*c.ROW_HEIGHT+")"),m+=n.selectAll("tspan").size()-1});var n=h.select(this);n.attr("height",parseFloat(n.attr("height"))+m*c.ROW_HEIGHT)}),v.append("rect").attr("x",-l).attr("y",-l).attr("width",this.categoryNodeWidth+2.5*this.ROW_HEIGHT).attr("height",this.ROW_HEIGHT).on("mouseover",function(t,e){c.onItemMouseOver(this,t,e)}).on("mouseout",function(t,e){c.onItemMouseOut(this,t,e)}).on("click",function(t,e){"function"==typeof i&&i.call(n,t,e)})},onItemMouseOver:function(t,e,n){var r=h.select(t.parentNode);r.select("text").text((e.prettyValue||this._setTextValueFormatter(e.value))+(e.units?" "+e.units:"")).style("font-weight",400)},onItemMouseOut:function(t,e,n){var r=h.select(t.parentNode);r.select("text").text(e.name).style("font-weight",null).call(this.wrap,this.categoryNodeWidth)},destroy:function(t){h.select(t).html("")},wrap:function(t,e){t.each(function(){var t=["/","&"],n=h.select(this),r=n.text(),o=void 0;t.forEach(function(t){r=r.replace(t,t+" ")});for(var i=r.split(/\s+/).reverse(),s=void 0,a=[],u=0,l=1.1,c=n.attr("x"),p=n.attr("y"),f=parseFloat(n.attr("dy")||0),d=n.text(null).append("tspan").attr("x",c).attr("y",p).attr("dy",f+"em");s=i.pop();)a.push(s),d.text(a.join(" ")),d.node().getComputedTextLength()>e&&(a.pop(),o=a.join(" "),t.forEach(function(t){o=o.replace(t+" ",t)}),d.text(o),a=[s],d=n.append("tspan").attr("x",c).attr("y",p).attr("dy",++u*l+f+"em").text(s))})}};t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(11)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(7),c=u(l),p=n(6),f=n(14),h=u(f),d=n(94),y=u(d);n(162);var v=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.chartConstructor=y["default"]}return o(e,t),i(e,null,[{key:"propTypes",value:a({},h["default"].propTypes,{dotRadiusScale:p.PropTypes.func,dotRadius:p.PropTypes.number,dotRadiusAccessor:p.PropTypes.func,dotColorScale:p.PropTypes.func,dotColorAccessor:p.PropTypes.func}),enumerable:!0},{key:"defaultProps",value:a({},h["default"].defaultProps,{xScale:c["default"].scale.linear(),yScale:c["default"].scale.linear(),className:"scatterplot",dotRadius:3,xaxis:{className:"x axis",orient:"bottom",position:"bottom",attr:{dx:"0",dy:"0.5em"},style:{"text-anchor":"middle"}},yaxis:{className:"y axis",orient:"left"}}),enumerable:!0}]),e}(h["default"]);e["default"]=v,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(13),l=a(u),c=n(7),p=a(c),f=n(18),h=a(f),d=function(t){function e(){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,t),i(e,[{key:"willMount",value:function(){this.props.xaxis&&this.setAxis(new h["default"](this.props.xaxis,this.props.xScale)),this.props.yaxis&&this.setAxis(new h["default"](this.props.yaxis,this.props.yScale))}},{key:"onMount",value:function(t){r(Object.getPrototypeOf(e.prototype),"onMount",this).call(this,t),this._render()}},{key:"preRender",value:function(){var t=this.props,e=t.data,n=t.xAccessor,r=t.yAccessor,o=t.xScale,i=t.yScale,s=t.dotRadiusScale,a=t.dotRadiusAccessor;o.range([0,this.width]),o.domain(p["default"].extent(e,function(t){return n(t)})).nice(),i.range([this.height,0]),i.domain(p["default"].extent(e,function(t){return r(t)})).nice(),s&&a&&s.domain(p["default"].extent(e,function(t){return a(t)}))}},{key:"render",value:function(){var t=this.props,e=t.data,n=t.xAccessor,r=t.yAccessor,o=t.xScale,i=t.yScale,s=t.dotRadius,a=t.dotRadiusScale,u=t.dotRadiusAccessor,l=t.dotColorScale,c=t.dotColorAccessor,p=this.base.selectAll(".dot").data(e);p.exit().remove(),p.enter().append("circle").attr("class","dot"),p.attr("r",function(t){return a||u?a(u(t)):s}).attr("cx",function(t){return o(n(t))}).attr("cy",function(t){return i(r(t))}).style("fill",function(t){return l&&c?l(c(t)):"lime"})}},{key:"postRender",value:function(){var t=this.props,e=t.selected,n=t.selectionAccessor,r=t.interactive,o=this.base.selectAll(".dot");r&&o.on("click",this.dispatch.click).on("mouseover",this.dispatch.mouseOver).on("mouseout",this.dispatch.mouseOut),e&&o.classed("selected",function(t){return n(t)===e})}}]),e}(l["default"]);e["default"]=d,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),l=a(u),c=n(30),p=a(c),f=n(96),h=a(f);n(163);var d=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.selectedKey=null,this.currentKey=null,this.handleScroll=this.handleScroll.bind(this),this.onClickHandler=this.onClickHandler.bind(this)}return o(e,t),i(e,null,[{key:"propTypes",value:{items:u.PropTypes.array.isRequired,keyAccessor:u.PropTypes.func.isRequired,renderItem:u.PropTypes.func.isRequired,onItemClicked:u.PropTypes.func,selected:u.PropTypes.string,height:u.PropTypes.any,isItemDirty:u.PropTypes.func,onStoryScroll:u.PropTypes.func,sensitivity:u.PropTypes.number},enumerable:!0},{key:"defaultProps",value:{selected:null,height:400,sensitivity:30},enumerable:!0}]),i(e,[{key:"componentDidMount",value:function(){this.listContainer=p["default"].findDOMNode(this.refs.list),this.listContainer.addEventListener("scroll",this.handleScroll,!1)}},{key:"componentWillUnmount",value:function(){this.listContainer.removeEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(){var t=this.props.selected;this.buildItemCache(),this.anchors.length&&t!==this.selectedKey&&(this.selectedKey=t,this.setScrollPosition())}},{key:"buildItemCache",value:function(){var t=this;this.anchors=[],this.anchorMap={};var e=this.listContainer.querySelectorAll(".textural-list--item");[].forEach.call(e,function(e){var n={t:e.offsetTop,key:e.getAttribute("data-id")};t.anchorMap[n.key]=e,t.anchors.push(n)})}},{key:"setScrollPosition",value:function(){if(this.selectedKey&&this.listContainer){var t=this.selectedKey in this.anchorMap?this.anchorMap[this.selectedKey].offsetTop:null;t&&(this.listContainer.scrollTop=t)}}},{key:"handleScroll",value:function(){var t=this,e=this.props,n=e.onStoryScroll,r=e.sensitivity,o=this.listContainer.scrollTop,i=this.currentKey,s=this.listContainer.scrollHeight,a=this.listContainer.clientHeight,u=void 0;this.anchors&&(0>=o?this.currentKey=this.anchors[0].key:s-o===a?this.currentKey=this.anchors[this.anchors.length-1].key:this.anchors.forEach(function(e){u=o-e.t,r>u&&u>-r&&t.currentKey!==e.key&&(t.currentKey=e.key)}),i!==this.currentKey&&"function"==typeof n&&n(this.currentKey))}},{key:"getClosestItemNode",value:function(t){for(;t&&t!==document;t=t.parentNode)if(t.classList.contains("textural-list--item"))return t;return!1}},{key:"getDataItemForKey",value:function(t){var e=this,n=this.props,r=n.items,o=n.keyAccessor,i=r.filter(function(n){return e.coerceKey(o(n))===t});return i.length?i:null}},{key:"onClickHandler",value:function(t){var e=this.props.onItemClicked,n=t.target||null;if(n){var r=n.classList.contains("textural-list--item")?n:this.getClosestItemNode(n);if(r){var o=r.getAttribute("data-id");if(o){var i=this.getDataItemForKey(o);i.length&&"function"==typeof e&&e(i)}}}}},{key:"renderItems",value:function(){var t=this,e=this.props,n=e.renderItem,r=e.items,o=e.keyAccessor,i=e.isItemDirty,s="function"==typeof o,a="function"==typeof i;return r.map(function(e,r){var u=a?i(e):!0,c=s?o(e):r;return l["default"].createElement(h["default"],{key:c,renderItem:n,index:r,identifier:t.coerceKey(c),dirty:u})})}},{key:"coerceKey",value:function(t){return""+t}},{key:"isNumeric",value:function(t){return!isNaN(t)}},{key:"render",value:function(){var t=this.props.height,e=this.isNumeric(t)?{maxHeight:t}:null;return l["default"].createElement("div",{className:"panorama textural-list"},l["default"].createElement("div",{ref:"list",className:"textural-list--inner",style:e,onClick:this.onClickHandler},this.renderItems()))}}]),e}(u.Component);e["default"]=d,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),l=a(u),c=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),i(e,null,[{key:"propTypes",value:{renderItem:u.PropTypes.func.isRequired,index:u.PropTypes.number.isRequired,dirty:u.PropTypes.bool,identifier:u.PropTypes.string},enumerable:!0},{key:"defaultProps",value:{dirty:!0},enumerable:!0}]),i(e,[{key:"shouldComponentUpdate",value:function(t,e){return t.dirty}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var t=this.props,e=t.renderItem,n=t.index,r=t.identifier;return l["default"].createElement("div",{className:"textural-list--item","data-id":r},e(n))}}]),e}(u.Component);e["default"]=c,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],s=n(2)["default"],a=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),l=n(22),c=n(7),p=a(c);n(164);var f=function(t){function e(t){s(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.map=null}return o(e,t),i(e,null,[{key:"propTypes",value:{features:u.PropTypes.object.isRequired,currentDate:u.PropTypes.instanceOf(Date)},enumerable:!0},{key:"defaultProps",value:{features:{},currentDate:null},enumerable:!0}]),i(e,[{key:"componentDidMount",value:function(){this.markers=[],this.map=this.props.map,this._el=L.DomUtil.create("div","panorama time-based-markers-layer leaflet-zoom-hide leaflet-d3-overlay"),this.map.getPanes().overlayPane.appendChild(this._el),this.svg=p["default"].select(this._el).append("svg"),this.container=this.svg.append("g").attr("class","panorama time-based-markers-container"),this.setOverlayPosition(),this.map.on("viewreset",this._reset,this),this.dirty&&this.draw(this.props.features)}},{key:"componentWillUnmount",value:function(){this.map.getPanes().overlayPane.removeChild(this._el),this.map.off("viewreset",this._reset,this),this.markers=[],this.line=null}},{key:"componentDidUpdate",value:function(){var t=this;this.props.features&&this.props.features.features.length&&!this.loaded&&this.draw(this.props.features),this.props.currentDate!==this.currentDate&&(this.currentDate=this.props.currentDate,this.filter()),setTimeout(function(){t.map.getPanes().overlayPane.appendChild(t._el)},1)}},{key:"render",value:function(){return!1}},{key:"setOverlayPosition",value:function(){var t=this.map.getBounds(),e=this.map.latLngToLayerPoint(t.getNorthWest());this.map.latLngToLayerPoint(t.getSouthEast());this.svg&&(p["default"].select(this._el).style("width",this.map.getSize().x+"px").style("height",this.map.getSize().y+"px").style("margin-left","0px").style("margin-top","0px").attr("transform","translate("+-e.x+","+-e.y+")"),this.svg.style("width",this.map.getSize().x+"px").style("height",this.map.getSize().y+"px"))}},{key:"_reset",value:function(){this.setOverlayPosition(),this.filter(),this.position()}},{key:"filter",value:function(){if(this.map){var t=this.props.currentDate||null,e=this.map.getZoom(),n=!1;this.markers.forEach(function(r){r.show="none",t&&e>=r.zoomStart&&e<=r.zoomEnd&&(r.start?!r.end&&t>=r.start?(r.show="block",n=!0):t>=r.start&&t<=r.end&&(r.show="block",n=!0):(r.show="block",n=!0)),r.elm.style("display",r.show)}),n&&this.position()}}},{key:"position",value:function(){if(this.markers&&this.map){var t=this;this.markers.forEach(function(e){if("none"!==e.show){var n;"icon"===e.markerType?(n=t.map.latLngToLayerPoint(e.coords),e.elm.attr("cx",n.x+"px").attr("cy",n.y+"px")):"label"===e.markerType?(n=t.map.latLngToLayerPoint(e.coords),e.elm.attr("x",n.x+"px").attr("y",n.y+"px")):"line"===e.markerType&&e.elm.attr("d",t.line(e.coords))}})}}},{key:"draw",value:function(t){function e(t,e){return i.container.append("circle").attr("class","time-based-"+[e.maptype,e.type].join(" ")).attr("cx",t.x+"px").attr("cy",t.y+"px").attr("r",3)}function n(t,e){var n="left"===e.justify?"start":"end";return i.container.append("text").attr("class","with-outlines time-based-"+[e.maptype,e.type].join(" ")).attr("x",t.x+"px").attr("y",t.y+"px").attr("text-anchor",n).text(e.location)}function r(t,e){return i.container.append("path").attr("class","time-based-"+[e.maptype,e.type].join(" ")).attr("d",i.line(t))}function o(o){t.features.forEach(function(t){var s,a,u,l=t.properties,c=t.geometry.type;l.maptype===o&&("icon"===l.maptype?(s=t.geometry.coordinates.reverse(),u=i.map.latLngToLayerPoint(s),a=e(u,l)):"label"===l.maptype?(s=t.geometry.coordinates.reverse(),u=i.map.latLngToLayerPoint(s),a=n(u,l)):"line"===l.maptype&&(s=t.geometry.coordinates,s.forEach(function(t){t.reverse()}),a=r(s,l)),a?i.markers.push({elm:a,coords:s,geometryType:c,markerType:l.maptype||"",start:l.start_year?new Date(l.start_year):null,end:l.end_year?new Date(l.end_year):null,zoomStart:l.startzoom?+l.startzoom:i.map.minZoom,zoomEnd:l.endzoom?+l.endzoom:i.map.maxZoom}):console.error("Unknown feature: ",t))})}if(t&&!this.loaded){if(this.loaded=!0,!this.map)return void(this.dirty=!0);this.dirty=!1;var i=this;if(this.markers.length)return position();this.line=p["default"].svg.line().x(function(t){return i.map.latLngToLayerPoint(t).x}).y(function(t){return i.map.latLngToLayerPoint(t).y}).interpolate("linear"),this.markers=[],o("label"),o("line"),o("icon"),this.filter()}}}]),e}(l.MapLayer);e["default"]=f,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(3)["default"],o=n(2)["default"],i=n(11)["default"],s=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var a=n(7),u=s(a),l=n(32),c=function(){function t(e,n){o(this,t),this._options=i({},l.tooltipDefaultOptions,n),this._element=u["default"].select(e),this.closeTimer=null}return r(t,[{key:"unMount",value:function(){this._options={},this._element=null,this._relativeContainer=null,this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null)}},{key:"setPosition",value:function(t){if(this.isShowing){var e=this.calcPosition(t);this.element.style("left",e[0]+"px").style("top",e[1]+"px")}}},{key:"calcPosition",value:function(t){var e=this.options,n=e.offset,r=e.align,o=r.split(" "),i=this.element.node().offsetWidth,s=this.element.node().offsetHeight,a=this.relativeContainer||t.target||t.srcElement,u=a.getBoundingClientRect(),l=t.clientX-u.left,c=t.clientY-u.top;switch(o[0]){case"top":c-=s-n[1];break;case"bottom":default:c-=n[1]}switch(o[1]){case"center":l-=i/2+n[0];break;case"right":l-=i+n[0];break;case"left":default:l+=n[0]}return[l,c]}},{key:"setContent",value:function(t){return"function"==typeof this.options.onSetTooltipContent?this.options.onSetTooltipContent(this.element,t):this.element.text(""),this}},{key:"show",value:function(t,e){return this.isShowing?void 0:(this.isShowing=!0,this.element.classed("active",!0),t&&this.setPosition(t),e&&this.setContent(e),this)}},{key:"hide",value:function(t){var e=this;if(this.isShowing)return this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null),this.isShowing=!1,t||this.options.closeDelay<1?this.setActiveToFalse():this.closeTimer=setTimeout(function(){e.isShowing||e.setActiveToFalse()},this.options.closeDelay),this}},{key:"setActiveToFalse",value:function(){this.closeTimer=null,this.element.classed("active",!1)}},{key:"toString",value:function(){return"Tooltip"}},{key:"element",get:function(){return this._element},set:function(t){this._element=u["default"].select(t)}},{key:"options",get:function(){return this._options},set:function(t){this._options=i({},this.options,{obj:t})}},{key:"relativeContainer",get:function(){return this._relativeContainer},set:function(t){this._relativeContainer=t.node?t.node():t}}]),t}();e["default"]=c,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(108),__esModule:!0}},function(t,e,n){t.exports={"default":n(109),__esModule:!0}},function(t,e,n){t.exports={"default":n(111),__esModule:!0}},function(t,e,n){t.exports={"default":n(112),__esModule:!0}},function(t,e,n){t.exports={"default":n(113),__esModule:!0}},function(t,e,n){t.exports={"default":n(114),__esModule:!0}},function(t,e,n){t.exports={"default":n(115),__esModule:!0}},function(t,e,n){t.exports={"default":n(116),__esModule:!0}},function(t,e,n){"use strict";var r=n(99)["default"],o=n(100)["default"];e["default"]=function(){function t(t,e){var n=[],o=!0,i=!1,s=void 0;try{for(var a,u=r(t);!(o=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(l){i=!0,s=l}finally{try{!o&&u["return"]&&u["return"]()}finally{if(i)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if(o(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e.__esModule=!0},function(t,e,n){n(42),n(41),t.exports=n(139)},function(t,e,n){n(42),n(41),t.exports=n(140)},function(t,e,n){n(142),t.exports=n(8).Object.assign},function(t,e,n){var r=n(9);t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(9);t.exports=function(t,e,n){return r.setDesc(t,e,n)}},function(t,e,n){var r=n(9);n(143),t.exports=function(t,e){return r.getDesc(t,e)}},function(t,e,n){n(144),t.exports=n(8).Object.keys},function(t,e,n){n(145),t.exports=n(8).Object.setPrototypeOf},function(t,e,n){n(146),n(41),n(42),n(147),t.exports=n(8).Promise},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(25),o=n(12).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(19),o=n(123),i=n(122),s=n(15),a=n(137),u=n(60);t.exports=function(t,e,n,l){var c,p,f,h=u(t),d=r(n,l,e?2:1),y=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(i(h))for(c=a(t.length);c>y;y++)e?d(s(p=t[y])[0],p[1]):d(t[y]);else for(f=h.call(t);!(p=f.next()).done;)o(f,d,p.value,e)}},function(t,e,n){t.exports=n(12).document&&document.documentElement},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(16),o=n(10)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(15);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(i){var s=t["return"];throw void 0!==s&&r(s.call(t)),i}}},function(t,e,n){"use strict";var r=n(9),o=n(54),i=n(40),s={};n(39)(s,n(10)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r.create(s,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(10)("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(s){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],s=i[r]();s.next=function(){n=!0},i[r]=function(){return s},
t(i)}catch(a){}return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r,o,i,s=n(12),a=n(136).set,u=s.MutationObserver||s.WebKitMutationObserver,l=s.process,c=s.Promise,p="process"==n(24)(l),f=function(){var t,e,n;for(p&&(t=l.domain)&&(l.domain=null,t.exit());r;)e=r.domain,n=r.fn,e&&e.enter(),n(),e&&e.exit(),r=r.next;o=void 0,t&&t.enter()};if(p)i=function(){l.nextTick(f)};else if(u){var h=1,d=document.createTextNode("");new u(f).observe(d,{characterData:!0}),i=function(){d.data=h=-h}}else i=c&&c.resolve?function(){c.resolve().then(f)}:function(){a.call(s,f)};t.exports=function(t){var e={fn:t,next:void 0,domain:p&&l.domain};o&&(o.next=e),r||(r=e,i()),o=e}},function(t,e,n){var r=n(9),o=n(59),i=n(50);t.exports=n(38)(function(){var t=Object.assign,e={},n={},r=Symbol(),o="abcdefghijklmnopqrst";return e[r]=7,o.split("").forEach(function(t){n[t]=t}),7!=t({},e)[r]||Object.keys(t({},n)).join("")!=o})?function(t,e){for(var n=o(t),s=arguments,a=s.length,u=1,l=r.getKeys,c=r.getSymbols,p=r.isEnum;a>u;)for(var f,h=i(s[u++]),d=c?l(h).concat(c(h)):l(h),y=d.length,v=0;y>v;)p.call(h,f=d[v++])&&(n[f]=h[f]);return n}:Object.assign},function(t,e,n){var r=n(55);t.exports=function(t,e){for(var n in e)r(t,n,e[n]);return t}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){"use strict";var r=n(8),o=n(9),i=n(37),s=n(10)("species");t.exports=function(t){var e=r[t];i&&e&&!e[s]&&o.setDesc(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(12),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,n){var r=n(15),o=n(34),i=n(10)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||void 0==(n=r(s)[i])?e:o(n)}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError(n+": use the 'new' operator!");return t}},function(t,e,n){var r=n(57),o=n(36);t.exports=function(t){return function(e,n){var i,s,a=String(o(e)),u=r(n),l=a.length;return 0>u||u>=l?t?"":void 0:(i=a.charCodeAt(u),55296>i||i>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):i:t?a.slice(u,u+2):(i-55296<<10)+(s-56320)+65536)}}},function(t,e,n){var r,o,i,s=n(19),a=n(121),u=n(120),l=n(118),c=n(12),p=c.process,f=c.setImmediate,h=c.clearImmediate,d=c.MessageChannel,y=0,v={},m="onreadystatechange",g=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},x=function(t){g.call(t.data)};f&&h||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return v[++y]=function(){a("function"==typeof t?t:Function(t),e)},r(y),y},h=function(t){delete v[t]},"process"==n(24)(p)?r=function(t){p.nextTick(s(g,t,1))}:d?(o=new d,i=o.port2,o.port1.onmessage=x,r=s(i.postMessage,i,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",x,!1)):r=m in l("script")?function(t){u.appendChild(l("script"))[m]=function(){u.removeChild(this),g.call(t)}}:function(t){setTimeout(s(g,t,1),0)}),t.exports={set:f,clear:h}},function(t,e,n){var r=n(57),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(15),o=n(60);t.exports=n(8).getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var r=n(35),o=n(10)("iterator"),i=n(16);t.exports=n(8).isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||i.hasOwnProperty(r(e))}},function(t,e,n){"use strict";var r=n(117),o=n(126),i=n(16),s=n(58);t.exports=n(51)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(20);r(r.S+r.F,"Object",{assign:n(128)})},function(t,e,n){var r=n(58);n(53)("getOwnPropertyDescriptor",function(t){return function(e,n){return t(r(e),n)}})},function(t,e,n){var r=n(59);n(53)("keys",function(t){return function(e){return t(r(e))}})},function(t,e,n){var r=n(20);r(r.S,"Object",{setPrototypeOf:n(56).set})},function(t,e){},function(t,e,n){"use strict";var r,o=n(9),i=n(52),s=n(12),a=n(19),u=n(35),l=n(20),c=n(25),p=n(15),f=n(34),h=n(134),d=n(119),y=n(56).set,v=n(130),m=n(10)("species"),g=n(133),x=n(127),b="Promise",k=s.process,_="process"==u(k),P=s[b],T=function(t){var e=new P(function(){});return t&&(e.constructor=Object),P.resolve(e)===e},O=function(){function t(e){var n=new P(e);return y(n,t.prototype),n}var e=!1;try{if(e=P&&P.resolve&&T(),y(t,P),t.prototype=o.create(P.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&n(37)){var r=!1;P.resolve(o.setDesc({},"then",{get:function(){r=!0}})),e=r}}catch(i){e=!1}return e}(),w=function(t,e){return i&&t===P&&e===r?!0:v(t,e)},M=function(t){var e=p(t)[m];return void 0!=e?e:t},C=function(t){var e;return c(t)&&"function"==typeof(e=t.then)?e:!1},E=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=f(e),this.reject=f(n)},S=function(t){try{t()}catch(e){return{error:e}}},A=function(t,e){if(!t.n){t.n=!0;var n=t.c;x(function(){for(var r=t.v,o=1==t.s,i=0,a=function(e){var n,i,s=o?e.ok:e.fail,a=e.resolve,u=e.reject;try{s?(o||(t.h=!0),n=s===!0?r:s(r),n===e.promise?u(TypeError("Promise-chain cycle")):(i=C(n))?i.call(n,a,u):a(n)):u(r)}catch(l){u(l)}};n.length>i;)a(n[i++]);n.length=0,t.n=!1,e&&setTimeout(function(){var e,n,o=t.p;j(o)&&(_?k.emit("unhandledRejection",r,o):(e=s.onunhandledrejection)?e({promise:o,reason:r}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",r)),t.a=void 0},1)})}},j=function(t){var e,n=t._d,r=n.a||n.c,o=0;if(n.h)return!1;for(;r.length>o;)if(e=r[o++],e.fail||!j(e.promise))return!1;return!0},L=function(t){var e=this;e.d||(e.d=!0,e=e.r||e,e.v=t,e.s=2,e.a=e.c.slice(),A(e,!0))},I=function(t){var e,n=this;if(!n.d){n.d=!0,n=n.r||n;try{if(n.p===t)throw TypeError("Promise can't be resolved itself");(e=C(t))?x(function(){var r={r:n,d:!1};try{e.call(t,a(I,r,1),a(L,r,1))}catch(o){L.call(r,o)}}):(n.v=t,n.s=1,A(n,!1))}catch(r){L.call({r:n,d:!1},r)}}};O||(P=function(t){f(t);var e=this._d={p:h(this,P,b),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{t(a(I,e,1),a(L,e,1))}catch(n){L.call(e,n)}},n(129)(P.prototype,{then:function(t,e){var n=new E(g(this,P)),r=n.promise,o=this._d;return n.ok="function"==typeof t?t:!0,n.fail="function"==typeof e&&e,o.c.push(n),o.a&&o.a.push(n),o.s&&A(o,!1),r},"catch":function(t){return this.then(void 0,t)}})),l(l.G+l.W+l.F*!O,{Promise:P}),n(40)(P,b),n(131)(b),r=n(8)[b],l(l.S+l.F*!O,b,{reject:function(t){var e=new E(this),n=e.reject;return n(t),e.promise}}),l(l.S+l.F*(!O||T(!0)),b,{resolve:function(t){if(t instanceof P&&w(t.constructor,this))return t;var e=new E(this),n=e.resolve;return n(t),e.promise}}),l(l.S+l.F*!(O&&n(125)(function(t){P.all(t)["catch"](function(){})})),b,{all:function(t){var e=M(this),n=new E(e),r=n.resolve,i=n.reject,s=[],a=S(function(){d(t,!1,s.push,s);var n=s.length,a=Array(n);n?o.each.call(s,function(t,o){var s=!1;e.resolve(t).then(function(t){s||(s=!0,a[o]=t,--n||r(a))},i)}):r(a)});return a&&i(a.error),n.promise},race:function(t){var e=M(this),n=new E(e),r=n.reject,o=S(function(){d(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},function(t,e){function n(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}function r(t){if(!(this instanceof r))return new r(t);t||(t={}),t.nodeType&&(t={el:t}),this.opts=t,this.el=t.el||document.body,"object"!=typeof this.el&&(this.el=document.querySelector(this.el))}t.exports=function(t){return new r(t)},r.prototype.add=function(t){var e=this.el;if(e){if(""===e.className)return e.className=t;var r=e.className.split(" ");return n(r,t)>-1?r:(r.push(t),e.className=r.join(" "),r)}},r.prototype.remove=function(t){var e=this.el;if(e&&""!==e.className){var r=e.className.split(" "),o=n(r,t);return o>-1&&r.splice(o,1),e.className=r.join(" "),r}},r.prototype.has=function(t){var e=this.el;if(e){var r=e.className.split(" ");return n(r,t)>-1}},r.prototype.toggle=function(t){var e=this.el;e&&(this.has(t)?this.remove(t):this.add(t))}},function(t,e,n){var r;!function(){"use strict";var o=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:o,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:o&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:o&&!!window.screen};r=function(){return i}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}()},function(t,e){},150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,function(t,e,n){function r(t,e){return null==e?t:o(e,i(e),t)}var o=n(167),i=n(62);t.exports=r},function(t,e){function n(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}t.exports=n},function(t,e){function n(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,s){return t.call(e,n,r,o,i,s)}}return function(){return t.apply(e,arguments)}}function r(t){return t}t.exports=n},function(t,e,n){function r(t){return s(function(e,n){var r=-1,s=null==e?0:n.length,a=s>2?n[s-2]:void 0,u=s>2?n[2]:void 0,l=s>1?n[s-1]:void 0;for("function"==typeof a?(a=o(a,l,5),s-=2):(a="function"==typeof l?l:void 0,s-=a?1:0),u&&i(n[0],n[1],u)&&(a=3>s?void 0:a,s=1);++r<s;){var c=n[r];c&&t(e,c,a)}return e})}var o=n(168),i=n(171),s=n(175);t.exports=r},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return s(n)?n:void 0}function o(t){return i(t)&&f.call(t)==a}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null==t?!1:o(t)?h.test(c.call(t)):n(t)&&u.test(t)}var a="[object Function]",u=/^\[object .+?Constructor\]$/,l=Object.prototype,c=Function.prototype.toString,p=l.hasOwnProperty,f=l.toString,h=RegExp("^"+c.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&s(c(t))}function o(t,e){return t="number"==typeof t||u.test(t)?+t:-1,e=null==e?l:e,t>-1&&t%1==0&&e>t}function i(t,e,n){if(!a(n))return!1;var i=typeof e;if("number"==i?r(n)&&o(e,n.length):"string"==i&&e in n){var s=n[e];return t===t?t===s:s!==s}return!1}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&l>=t}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var u=/^\d+$/,l=9007199254740991,c=n("length");t.exports=i},function(t,e,n){function r(t,e,n){for(var r=-1,o=s(e),i=o.length;++r<i;){var a=o[r],u=t[a],l=n(u,e[a],a,t,e);(l===l?l===u:u!==u)&&(void 0!==u||a in t)||(t[a]=l)}return t}var o=n(166),i=n(169),s=n(62),a=i(function(t,e,n){return n?r(t,e,n):o(t,e)});t.exports=a},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function r(t){return i(t)&&y.call(t,"callee")&&(!m.call(t,"callee")||v.call(t)==p)}function o(t){return null!=t&&a(g(t))&&!s(t)}function i(t){return l(t)&&o(t)}function s(t){var e=u(t)?v.call(t):"";return e==f||e==h}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&c>=t}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){return!!t&&"object"==typeof t}var c=9007199254740991,p="[object Arguments]",f="[object Function]",h="[object GeneratorFunction]",d=Object.prototype,y=d.hasOwnProperty,v=d.toString,m=d.propertyIsEnumerable,g=n("length");t.exports=r},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return a(n)?n:void 0}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&m>=t}function i(t){return s(t)&&d.call(t)==l}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null==t?!1:i(t)?y.test(f.call(t)):n(t)&&c.test(t)}var u="[object Array]",l="[object Function]",c=/^\[object .+?Constructor\]$/,p=Object.prototype,f=Function.prototype.toString,h=p.hasOwnProperty,d=p.toString,y=RegExp("^"+f.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=r(Array,"isArray"),m=9007199254740991,g=v||function(t){return n(t)&&o(t.length)&&d.call(t)==u};t.exports=g},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(r);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-e,0),s=Array(i);++r<i;)s[r]=n[e+r];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var a=Array(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=s,t.apply(this,a)}}var r="Expected a function",o=Math.max;t.exports=n},function(t,e){function n(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}t.exports=n},function(t,e,n){function r(t,e,n){for(var r=-1,i=o(e),s=i.length;++r<s;){var a=i[r],u=t[a],l=n(u,e[a],a,t,e);(l===l?l===u:u!==u)&&(void 0!==u||a in t)||(t[a]=l)}return t}var o=n(68);t.exports=r},function(t,e,n){function r(t,e){return null==e?t:o(e,i(e),t)}var o=n(179),i=n(68);t.exports=r},function(t,e){function n(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}t.exports=n},function(t,e,n){function r(t,e,n,l){l||(l=[]);for(var c=-1,p=t.length;++c<p;){var f=t[c];u(f)&&a(f)&&(n||s(f)||i(f))?e?r(f,e,n,l):o(l,f):n||(l[l.length]=f)}return l}var o=n(176),i=n(44),s=n(29),a=n(26),u=n(28);t.exports=r},function(t,e,n){var r=n(185),o=r();t.exports=o},function(t,e,n){function r(t,e){return o(t,e,i)}var o=n(181),i=n(69);t.exports=r},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}t.exports=n},function(t,e,n){function r(t){return s(function(e,n){var r=-1,s=null==e?0:n.length,a=s>2?n[s-2]:void 0,u=s>2?n[2]:void 0,l=s>1?n[s-1]:void 0;for("function"==typeof a?(a=o(a,l,5),s-=2):(a="function"==typeof l?l:void 0,s-=a?1:0),u&&i(n[0],n[1],u)&&(a=3>s?void 0:a,s=1);++r<s;){var c=n[r];c&&t(e,c,a)}return e})}var o=n(64),i=n(187),s=n(63);t.exports=r},function(t,e,n){function r(t){return function(e,n,r){for(var i=o(e),s=r(e),a=s.length,u=t?a:-1;t?u--:++u<a;){var l=s[u];if(n(i[l],l,i)===!1)break}return e}}var o=n(66);t.exports=r},function(t,e,n){var r=n(183),o=r("length");t.exports=o},function(t,e,n){function r(t,e,n){if(!s(n))return!1;var r=typeof e;if("number"==r?o(n)&&i(e,n.length):"string"==r&&e in n){var a=n[e];return t===t?t===a:a!==a}return!1}var o=n(26),i=n(43),s=n(17);t.exports=r},function(t,e,n){function r(t,e){t=o(t);for(var n=-1,r=e.length,i={};++n<r;){var s=e[n];s in t&&(i[s]=t[s])}return i}var o=n(66);t.exports=r},function(t,e,n){function r(t,e){var n={};return o(t,function(t,r,o){e(t,r,o)&&(n[r]=t)}),n}var o=n(182);t.exports=r},function(t,e,n){function r(t){for(var e=u(t),n=e.length,r=n&&t.length,l=!!r&&a(r)&&(i(t)||o(t)),p=-1,f=[];++p<n;){var h=e[p];(l&&s(h,r)||c.call(t,h))&&f.push(h)}return f}var o=n(44),i=n(29),s=n(43),a=n(27),u=n(69),l=Object.prototype,c=l.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){return o(t)&&a.call(t)==i}var o=n(17),i="[object Function]",s=Object.prototype,a=s.toString;t.exports=r},function(t,e,n){function r(t){return null==t?!1:o(t)?c.test(u.call(t)):i(t)&&s.test(t)}var o=n(191),i=n(28),s=/^\[object .+?Constructor\]$/,a=Object.prototype,u=Function.prototype.toString,l=a.hasOwnProperty,c=RegExp("^"+u.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e,n){var r=n(180),o=n(64),i=n(188),s=n(189),a=n(63),u=a(function(t,e){return null==t?{}:"function"==typeof e[0]?s(t,o(e[0],e[1],3)):i(t,r(e))});t.exports=u},function(t,e){function n(t){return t}t.exports=n},function(t,e,n){function r(t){delete t.ref}var o=n(6),i=n(30),s=n(149),a=o.createFactory(n(196)),u=n(197),l=n(148),c=n(30).unstable_renderSubtreeIntoContainer,p=s.canUseDOM?window.HTMLElement:{};t.exports=o.createClass({displayName:"Modal",statics:{setAppElement:u.setElement,injectCSS:function(){}},propTypes:{isOpen:o.PropTypes.bool.isRequired,style:o.PropTypes.shape({content:o.PropTypes.object,overlay:o.PropTypes.object}),appElement:o.PropTypes.instanceOf(p),onRequestClose:o.PropTypes.func,closeTimeoutMS:o.PropTypes.number,ariaHideApp:o.PropTypes.bool},getDefaultProps:function(){return{isOpen:!1,ariaHideApp:!0,closeTimeoutMS:0}},componentDidMount:function(){this.node=document.createElement("div"),this.node.className="ReactModalPortal",document.body.appendChild(this.node),this.renderPortal(this.props)},componentWillReceiveProps:function(t){this.renderPortal(t)},componentWillUnmount:function(){i.unmountComponentAtNode(this.node),document.body.removeChild(this.node)},renderPortal:function(t){t.isOpen?l(document.body).add("ReactModal__Body--open"):l(document.body).remove("ReactModal__Body--open"),t.ariaHideApp&&u.toggle(t.isOpen,t.appElement),r(t),this.portal=c(this,a(t),this.node)},render:function(){return o.DOM.noscript()}})},function(t,e,n){function r(t){t.stopPropagation()}var o=n(6),i=o.DOM.div,s=n(198),a=n(199),u=n(172),l={overlay:{base:"ReactModal__Overlay",afterOpen:"ReactModal__Overlay--after-open",beforeClose:"ReactModal__Overlay--before-close"},content:{base:"ReactModal__Content",afterOpen:"ReactModal__Content--after-open",beforeClose:"ReactModal__Content--before-close"}},c={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};t.exports=o.createClass({displayName:"ModalPortal",getDefaultProps:function(){return{style:{overlay:{},content:{}}}},getInitialState:function(){return{afterOpen:!1,beforeClose:!1}},componentDidMount:function(){this.props.isOpen&&(this.setFocusAfterRender(!0),this.open())},componentWillUnmount:function(){clearTimeout(this.closeTimer)},componentWillReceiveProps:function(t){!this.props.isOpen&&t.isOpen?(this.setFocusAfterRender(!0),this.open()):this.props.isOpen&&!t.isOpen&&this.close()},componentDidUpdate:function(){this.focusAfterRender&&(this.focusContent(),this.setFocusAfterRender(!1))},setFocusAfterRender:function(t){this.focusAfterRender=t},open:function(){s.setupScopedFocus(this.node),s.markForFocusLater(),this.setState({isOpen:!0},function(){this.setState({afterOpen:!0})}.bind(this))},close:function(){this.ownerHandlesClose()&&(this.props.closeTimeoutMS>0?this.closeWithTimeout():this.closeWithoutTimeout())},focusContent:function(){this.refs.content.focus()},closeWithTimeout:function(){this.setState({beforeClose:!0},function(){this.closeTimer=setTimeout(this.closeWithoutTimeout,this.props.closeTimeoutMS)}.bind(this))},closeWithoutTimeout:function(){this.setState({afterOpen:!1,beforeClose:!1},this.afterClose)},afterClose:function(){s.returnFocus(),s.teardownScopedFocus()},handleKeyDown:function(t){9==t.keyCode&&a(this.refs.content,t),27==t.keyCode&&this.requestClose()},handleOverlayClick:function(){this.ownerHandlesClose()?this.requestClose():this.focusContent()},requestClose:function(){this.ownerHandlesClose()&&this.props.onRequestClose()},ownerHandlesClose:function(){return this.props.onRequestClose},shouldBeClosed:function(){return!this.props.isOpen&&!this.state.beforeClose},buildClassName:function(t,e){var n=l[t].base;return this.state.afterOpen&&(n+=" "+l[t].afterOpen),this.state.beforeClose&&(n+=" "+l[t].beforeClose),e?n+" "+e:n},render:function(){return this.shouldBeClosed()?i():i({ref:"overlay",className:this.buildClassName("overlay",this.props.overlayClassName),style:u({},c.overlay,this.props.style.overlay||{}),onClick:this.handleOverlayClick},i({ref:"content",style:u({},c.content,this.props.style.content||{}),className:this.buildClassName("content",this.props.className),tabIndex:"-1",onClick:r,onKeyDown:this.handleKeyDown},this.props.children))}})},function(t,e){function n(t){if("string"==typeof t){var e=document.querySelectorAll(t);t="length"in e?e[0]:e}u=t||u}function r(t){s(t),(t||u).setAttribute("aria-hidden","true")}function o(t){s(t),(t||u).removeAttribute("aria-hidden")}function i(t,e){t?r(e):o(e)}function s(t){if(!t&&!u)throw new Error("react-modal: You must set an element with `Modal.setAppElement(el)` to make this accessible")}function a(){u=document.body}var u="undefined"!=typeof document?document.body:null;e.toggle=i,e.setElement=n,e.show=o,e.hide=r,e.resetForTesting=a},function(t,e,n){function r(t){u=!0}function o(t){if(u){if(u=!1,!s)return;setTimeout(function(){if(!s.contains(document.activeElement)){var t=i(s)[0]||s;t.focus()}},0)}}var i=n(70),s=null,a=null,u=!1;e.markForFocusLater=function(){a=document.activeElement},e.returnFocus=function(){try{a.focus()}catch(t){console.warn("You tried to return focus to "+a+" but it is not in the DOM anymore")}a=null},e.setupScopedFocus=function(t){s=t,window.addEventListener?(window.addEventListener("blur",r,!1),document.addEventListener("focus",o,!0)):(window.attachEvent("onBlur",r),document.attachEvent("onFocus",o))},e.teardownScopedFocus=function(){s=null,window.addEventListener?(window.removeEventListener("blur",r),document.removeEventListener("focus",o)):(window.detachEvent("onBlur",r),document.detachEvent("onFocus",o))}},function(t,e,n){var r=n(70);t.exports=function(t,e){var n=r(t),o=n[e.shiftKey?0:n.length-1],i=o===document.activeElement||t===document.activeElement;if(i){e.preventDefault();var s=n[e.shiftKey?n.length-1:0];s.focus()}}},function(t,e,n){t.exports=n(195)},function(t,e){t.exports=s},function(t,e){t.exports=a},function(t,e){t.exports=u}]))});
//# sourceMappingURL=components.min.js.map